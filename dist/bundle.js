(function(){function w(n,o){if(!(n instanceof o))throw new TypeError("Cannot call a class as a function")}function K(n,o){for(var r=0;r<o.length;r++){var e=o[r];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(n,e.key,e)}}function S(n,o,r){return o&&K(n.prototype,o),r&&K(n,r),n}var me="FakeNitro",pe="rosie.fakenitro",ye="http://rosies-macbook-air.local:5496/bundle.js",he="1.0.2",ge="Adds an authentic pseudo-nitro experience to the client, ranging from free emojis to image banners.",ve=[{name:"Rosie<3",id:"581573474296791211"}],N={name:me,id:pe,bundle:ye,version:he,description:ge,authors:ve};const{utilities:D,metro:E,components:be,assets:{getIDByName:R},storage:{useSettingsStore:Q,get:_e,set:ft},patcher:{createPatcher:Ee}}=window.unbound,ke=window.ReactNative,l=window.React,[F,we,L]=E.findByProps({params:["canUseEmojisEverywhere"],lazy:!0},{params:["uploadLocalFiles"],lazy:!0},{params:["sendMessage","receiveMessage"],lazy:!0},{bulk:!0}),{ScrollView:Se,TouchableOpacity:W,View:b,LayoutAnimation:{create:G,configureNext:C},FlatList:dt}=ke,g=function(n){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return _e(N.name,n,o)},$e=function(n,o,r){return Object.values(o).map(function(e){let{patches:t}=e;Object.values(t).forEach(function(c){let{key:i}=c;return n.set(`${i}.enabled`,r)})})};function f(n,o,r){return o in n?Object.defineProperty(n,o,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[o]=r,n}function H(n,o){return H=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},H(n,o)}function P(n,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(o&&o.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),o&&H(n,o)}function z(n){return z=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},z(n)}function Re(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Pe(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Oe(n){return n&&typeof Symbol<"u"&&n.constructor===Symbol?"symbol":typeof n}function je(n,o){return o&&(Oe(o)==="object"||typeof o=="function")?o:Pe(n)}function O(n){var o=Re();return function(){var e=z(n),t;if(o){var c=z(this).constructor;t=Reflect.construct(e,arguments,c)}else t=e.apply(this,arguments);return je(this,t)}}let _=function(){function n(){w(this,n)}return S(n,null,[{key:"patch",value:function(o){}},{key:"render",value:function(o){return l.createElement(l.Fragment,null)}}]),n}();f(_,"key",void 0),f(_,"title",void 0),f(_,"subtitle",void 0),f(_,"icon",void 0);const{findStore:Ie}=E,xe=Ie("SelectedGuild");let T=function(n){P(r,n);var o=O(r);function r(){return w(this,r),o.apply(this,arguments)}return S(r,null,[{key:"parseEmojis",value:function(e){!e||!g(`${this.key}.enabled`)||(e.validNonShortcutEmojis.forEach(function(t,c){var i,a;(t.guildId!==xe.getGuildId()||t.animated)&&(e.content=e.content.replace(`<${t.animated?"a":""}:${(i=t.originalName)!=null?i:t.name}:${t.id}>`,t.url.replace("webp","png").replace(/size=\d+/,`size=48&quality=lossless&name=${(a=t.originalName)!=null?a:t.name}`)),delete e.validNonShortcutEmojis[c])}),e.validNonShortcutEmojis=e.validNonShortcutEmojis.filter(function(t){return t}))}},{key:"patch",value:function(e){var t=this;e.instead(F,"canUseEmojisEverywhere",function(){return!0}),e.instead(F,"canUseAnimatedEmojis",function(){return!0}),e.before(L,"sendMessage",function(c,i){let[,a]=i;return t.parseEmojis(a)}),e.before(we,"uploadLocalFiles",function(c,i){let[{parsedMessage:a}]=i;return t.parseEmojis(a)})}}]),r}(_);f(T,"key","freeEmojis"),f(T,"title","Free Emojis"),f(T,"subtitle","Allows you to send any custom or animated emoji as an image/gif link."),f(T,"icon","ic_emoji_24px");const{findStore:Te,findByName:Be}=E,{getCustomEmojiById:Ue}=Te("Emoji"),X=Be("RowManager");let j=function(n){P(r,n);var o=O(r);function r(){return w(this,r),o.apply(this,arguments)}return S(r,null,[{key:"patch",value:function(e){var t=this;e.before(X.prototype,"generate",function(c,i){var a,u,d;let[s]=i;if(s.rowType!==1||!((a=s.message)!=null&&a.content)||!g(`${t.key}.enabled`))return;let y=s.message.content;const m=t.emojiLinkRegex;if(typeof y!="string"||!y.match(m))return;let p=y.slice((u=y.match(m))==null?void 0:u.index).trim().split(`
`);if(!p.every(function(v){return v.match(m)}))return;y=y.slice(0,(d=y.match(m))==null?void 0:d.index),y=y.replace(/  /g,function(){return` ${p.shift()} `}).trim(),p.length&&(y+=` ${p.join(" ")}`);const h=s.message.embeds.filter(function(v){return!(v.type==="image"&&v.url.match(m))});s.message.content=y,s.message.embeds=h,s.__fakenitro=!0}),e.after(X.prototype,"generate",function(c,i,a){var u;let[d]=i;if(d.rowType!==1||!d.__fakenitro||!Array.isArray(a.message.content)||!g(`${t.key}.enabled`))return;const{content:s}=a.message;if(!Array.isArray(s))return;const y=t.emojiLinkRegex,m=s.every(function(p){return!!(p.type==="link"&&p.target.match(y)||p.type==="text"&&p.content===" ")});for(let p=0;p<s.length;p++){const h=s[p];if(h.type!=="link")continue;const v=h.target.match(y);if(!v)continue;const A=`${v[0]}?size=128`,de=Ue(v[1]);s[p]={type:"customEmoji",id:v[1],alt:(u=de?.name)!=null?u:"<fakenitro>",src:A,frozenSrc:A.replace("gif","webp"),jumboable:m?!0:void 0}}})}}]),r}(_);f(j,"key","realEmojis"),f(j,"title","Real Emojis"),f(j,"subtitle","Formats fake nitro emoji links into real emojis by parsing the links when rendering the chat."),f(j,"icon","ic_double_down_arrow"),f(j,"emojiLinkRegex",/https:\/\/cdn.discordapp.com\/emojis\/(\d+)\.\w+/);const{findStore:Z}=E,Ae=Z("Stickers"),Ne=Z("Channel");let B=function(n){P(r,n);var o=O(r);function r(){return w(this,r),o.apply(this,arguments)}return S(r,null,[{key:"getStickerUrl",value:function(e){return`https://media.discordapp.net/stickers/${e}.png?size=160&quality=lossless`}},{key:"canUseSticker",value:function(e,t){return!e.guild_id||e.guild_id===Ne.getChannel(t).guild_id}},{key:"patch",value:function(e){var t=this;e.instead(F,"canUseStickersEverywhere",function(){return!0}),e.instead(L,"sendStickers",function(c,i,a){const[u,d,s,y]=i,m=d.map(function(h){return Ae.getStickerById(h)}).filter(function(h){return!t.canUseSticker(h,u)});if(m.length<1)return a.apply(c,i);const p=m.map(function(h){return t.getStickerUrl(h.id)}).join(`
`);L.sendMessage(u,{content:p},null,y)})}}]),r}(_);f(B,"key","freeStickers"),f(B,"title","Free Stickers"),f(B,"subtitle","Turns invalid stickers into images when sent. Note that animated stickers will not be animated."),f(B,"icon","img_nitro_sticker");const{findByName:Ce,findStore:ze,common:{Clipboard:Me},components:{Redesign:De}}=E,{findInReactTree:Fe}=D,Le=ze("UserProfile"),Ge=Ce("EditProfileTheme",{interop:!1}),He=function(n){let{getText:o}=n,r;const[e,t]=l.useState(!1);return l.createElement(De.IconButton,{icon:R("ic_message_copy"),variant:"primary",size:"md",loading:e,onPress:function(){clearTimeout(r),t(function(c){return!c}),r=setTimeout(function(){return t(function(c){return!c})},400),Me.setString(o())}})};let $=function(n){P(r,n);var o=O(r);function r(){return w(this,r),o.apply(this,arguments)}return S(r,null,[{key:"is3y3",value:function(e){return Boolean([...e].some(function(t){return 917504<t.codePointAt(0)&&t.codePointAt(0)<917631}))}},{key:"encode",value:function(e){return[...e].map(function(t){return 0<t.codePointAt(0)&&t.codePointAt(0)<127?`${String.fromCodePoint(t.codePointAt(0)+917504)}`:t}).join("")}},{key:"decode",value:function(e){return[...e].map(function(t){return 917504<t.codePointAt(0)&&t.codePointAt(0)<917631?String.fromCodePoint(t.codePointAt(0)-917504):t}).join("")}},{key:"patch",value:function(e){var t=this;e.after(Le,"getUserProfile",function(c,i,a){if(!a||!t.is3y3(a.bio)||!g(`${t.key}.enabled`))return;const u=t.decode(a.bio),d=u.match(t.colorExpression);!d||(d.shift(),a.themeColors=d.map(function(s){return parseInt("0x"+s.slice(1))}),a.premiumType=2,a.bio=u.replace(t.replacingExpression,""))}),e.after(Ge,"default",function(c,i,a){var u;if(!g(`${t.key}.enabled`))return;const d=Fe(a,function(m){return m?.children.find(function(p){var h;return((h=p?.type)==null?void 0:h.name)==="ColorSwatch"})}),s=function(m){var p;return(p=d?.children)==null?void 0:p.find(function(h){var v,A;return((v=h?.type)==null?void 0:v.name)==="ColorSwatch"&&((A=h?.props)==null?void 0:A.description)===m})},y=function(m){return m.props.color.toString(16).padStart(6,"0")};(u=d.children)==null||u.unshift(l.createElement(b,{style:{marginTop:5,marginRight:8}},l.createElement(He,{getText:function(){const m=s("Primary"),p=s("Accent");return t.encode(`[#${y(m)},#${y(p)}]`)}})))})}}]),r}(_);f($,"key","profileThemes"),f($,"title","Profile Themes"),f($,"subtitle",'Uses 3y3 text to colorize profiles. Copy your own from the "Profile Theme" section.'),f($,"icon","ic_custom_color"),f($,"colorExpression",/\[(\#[0-9a-fA-F]{6})\s*,\s*(\#[0-9a-fA-F]{6})\]/),f($,"replacingExpression",new RegExp($.colorExpression,"g"));var Je=Object.defineProperty,M=Object.getOwnPropertySymbols,ee=Object.prototype.hasOwnProperty,te=Object.prototype.propertyIsEnumerable,ne=(n,o,r)=>o in n?Je(n,o,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[o]=r,Ve=(n,o)=>{for(var r in o||(o={}))ee.call(o,r)&&ne(n,r,o[r]);if(M)for(var r of M(o))te.call(o,r)&&ne(n,r,o[r]);return n},qe=(n,o)=>{var r={};for(var e in n)ee.call(n,e)&&o.indexOf(e)<0&&(r[e]=n[e]);if(n!=null&&M)for(var e of M(n))o.indexOf(e)<0&&te.call(n,e)&&(r[e]=n[e]);return r},re;const{common:{StyleSheet:Ye,Theme:J},components:{Forms:V}}=E,k=function(n){return Ye.createThemedStyleSheet(n)}({navigation:{paddingHorizontal:16,paddingBottom:16,backgroundColor:J.unsafe_rawColors.PRIMARY_800},shadow:{shadowColor:"#000",shadowOffset:{width:1,height:4},shadowOpacity:.15,shadowRadius:4.65,elevation:8},section:{marginHorizontal:16,shadowColor:"#000",shadowOffset:{width:1,height:4},shadowOpacity:.15,shadowRadius:4.65,elevation:8,height:"100%"},sectionIcon:{width:16,height:16,marginHorizontal:4},renderable:{backgroundColor:(re=J.colors.CARD_PRIMARY_BG)!=null?re:J.colors.BACKGROUND_PRIMARY},space:{marginBottom:50}}),Ke=[{title:"Disable",value:!1},{title:"Enable",value:!0}],Qe=function(n){let o=n,{title:r,icon:e,patches:t,children:c,style:i}=o,a=qe(o,["title","icon","patches","children","style"]);const[u,d]=l.useState(g(`${r}.hidden`,!1)),s=Object.keys(t).every(function(m){return!g(`${m}.enabled`)}),y=Q(N.name);return l.useEffect(function(){y.set(`${r}.hidden`,u)},[u]),l.createElement(V.FormSection,Ve({title:r,style:[i,{opacity:s?.5:1}],icon:l.createElement(b,{style:{flexDirection:"row"}},e,l.createElement(W,{onPress:function(){Object.keys(t).forEach(function(m){return y.set(`${m}.enabled`,s)}),C(G(300,"keyboard"))}},l.createElement(V.FormRow.Icon,{source:R(s?"Small":"Check"),style:k.sectionIcon})),l.createElement(W,{onPress:function(){d(function(m){return!m}),C({duration:300,create:{type:"keyboard",property:"opacity"},update:{type:"easeInEaseOut"},delete:{type:"easeInEaseOut",property:"opacity"}})}},l.createElement(V.FormRow.Icon,{source:R(`ic_arrow${u?"":"_down"}`),style:k.sectionIcon})))},a),!u&&c)},oe={serverInvite:"https://discord.gg/TeRQEPb",bannersSource:"https://raw.githubusercontent.com/Discord-Custom-Covers/usrbg/master/dist/usrbg.json"},{findByProps:ie,components:{Redesign:ae}}=E,We=ie("default","getUserBannerURL",{lazy:!0}),Xe=ie("openURL","openDeeplink",{lazy:!0});let I=function(n){P(r,n);var o=O(r);function r(){return w(this,r),o.apply(this,arguments)}return S(r,null,[{key:"fetchBanners",value:function(){var e=this;return new Promise(function(t,c){fetch(oe.bannersSource).then(function(i){return i.ok||c("Failed to fetch badges."),i.json()}).then(function(i){e.banners=i,t(1)}).catch(console.error)})}},{key:"getBanner",value:function(e){var t;const c=(t=this.banners)==null?void 0:t.find(function(i){return i.uid===e.id});return e?.banner===void 0&&c?c.img:e.banner}},{key:"patch",value:function(e){var t=this;e.after(We,"getUserBannerURL",function(c,i){let[a]=i;return g(`${t.key}.enabled`)?t.banners?t.getBanner(a):(t.fetchBanners(),a.banner):a.banner})}},{key:"render",value:function(e){let{disabled:t}=e;const[c,i]=l.useState(!1);return l.createElement(b,{style:{flexDirection:"row",marginHorizontal:16,marginBottom:16}},l.createElement(ae.Button,{text:"Join Server",onPress:function(){return Xe.openDeeplink(oe.serverInvite)},style:{flex:.5,marginRight:10},variant:"primary",size:"md",icon:R("icon-invite"),iconPosition:"start",disabled:t}),l.createElement(ae.Button,{text:"Reload Banners",onPress:function(){i(!0),r.fetchBanners().then(function(){return i(!1)}).catch(function(a){return console.error(a)})},style:{flex:.5},variant:"primary-alt",size:"md",icon:R("ic_message_retry"),iconPosition:"start",disabled:t,loading:c}))}}]),r}(_);f(I,"key","customBanner"),f(I,"title","Custom Banner"),f(I,"subtitle","Displays custom banners with the UsrBG API. Request your own at the server below."),f(I,"icon","ic_profile_24px"),f(I,"banners",void 0);const{findByName:ce,findByProps:se,common:{i18n:{Messages:U}}}=E,{findInReactTree:Ze}=D,et=se("ButtonColors",{lazy:!0}),tt=se("TextStyleSheet",{lazy:!0}),nt=ce("SettingsOverviewScreen",{interop:!1,lazy:!0}),rt=ce("UpsellCard",{interop:!1,lazy:!0});let x=function(n){P(r,n);var o=O(r);function r(){return w(this,r),o.apply(this,arguments)}return S(r,null,[{key:"patch",value:function(e){var t=this;e.instead(et,"default",function(c,i,a){if(!(i[0].text===U.EMOJI_POPOUT_PREMIUM_CTA&&g(`${t.key}.enabled`)))return a.apply(c,i)}),e.instead(b,"render",function(c,i,a){var u;if(!([U.PREMIUM,"Nitro"].includes((u=i[0])==null?void 0:u.accessibilityLabel)&&g(`${t.key}.enabled`)))return a.apply(c,i)}),e.instead(rt,"default",function(c,i,a){if(!g(`${t.key}.enabled`))return a.apply(c,i)}),e.before(tt.Text,"render",function(c,i){!g(`${t.key}.enabled`)||typeof i[0].children!="string"||t.props.forEach(function(a){var u,d,s;const y=U[`EMOJI_POPOUT_${a}`],m=U[`EMOJI_POPOUT_PREMIUM_${a}`];!((u=i[0].children)!=null&&u.includes(y))||(i[0].children=(s=(d=i[0].children)==null?void 0:d.replace)==null?void 0:s.call(d,y,m))})}),e.after(nt,"default",function(c,i,a){const{sections:u}=Ze(a,function(s){return s.sections}),d=u.find(function(s){return s.title===U.ACCOUNT_SETTINGS});d&&(d.settings=d.settings.filter(function(s){return s!=="PREMIUM"}))})}}]),r}(_);f(x,"key","hideUpsells"),f(x,"title","Hide Upsells"),f(x,"subtitle",'Hide any and all "Get Nitro" buttons and upsells throughout Discord'),f(x,"icon","img_nitro_boosted"),f(x,"props",["CURRENT_GUILD_DESCRIPTION","JOINED_GUILD_DESCRIPTION","UNJOINED_DISCOVERABLE_GUILD_DESCRIPTION"]);const q={chat:{icon:"img_nitro_star",patches:{freeEmojis:T,realEmojis:j,freeStickers:B}},profile:{icon:"ic_profile_24px",patches:{profileThemes:$,customBanner:I}},client:{icon:"ic_nitro_rep_24px",patches:{hideUpsells:x}}},ot=function(n){return Object.values(q).forEach(function(o){Object.values(o.patches).forEach(function(r){var e;try{r.patch(n)}catch(t){console.error(`Patch '${r.title}' (${r.key}) errored with '${(e=t.message)!=null?e:t}'.`)}})})},{components:{Forms:it,Redesign:{TableSwitchRow:at,TableRowIcon:ct},Button:Y}}=E,{AdvancedSearch:le}=be,ue={type:"FAKE_NITRO"};function st(){const n=Q(N.name),[o,r]=le.useAdvancedSearch(ue);return l.createElement(b,null,l.createElement(b,{style:k.navigation},l.createElement(b,{style:k.shadow},l.createElement(le,{searchContext:ue,controls:r})),l.createElement(b,{style:k.shadow},l.createElement(b,{style:{flexDirection:"row"}},Ke.map(function(e,t,c){let{title:i,value:a}=e,{length:u}=c;return l.createElement(Y,{color:Y.Colors.BRAND,text:i,size:Y.Sizes.MEDIUM,onPress:function(){$e(n,q,a),C(G(300,"keyboard"))},style:{marginTop:16,borderRadius:12,marginHorizontal:4,flex:1/u}})})))),l.createElement(Se,{style:k.section},l.createElement(b,{style:{marginTop:-20}}),Object.entries(q).map(function(e){let[t,{icon:c,patches:i}]=e;return l.createElement(Qe,{key:t,title:D.capitalize(t),icon:l.createElement(it.FormRow.Icon,{style:k.sectionIcon,source:R(c)}),inset:!0,sectionBodyStyle:{borderRadius:24},uppercaseTitle:!1,patches:i},Object.values(i).filter(function(a){let{title:u,subtitle:d}=a;return[u,d].some(function(s){return s.toLowerCase().includes(o.toLowerCase())})}).map(function(a,u,d){let{key:s,title:y,subtitle:m,icon:p,render:h}=a;return l.createElement(l.Fragment,null,l.createElement(at,{label:y,subLabel:m,icon:l.createElement(ct,{source:typeof p=="string"?R(p):p}),value:g(`${s}.enabled`),onValueChange:function(v){n.set(`${s}.enabled`,JSON.parse(v)),C(G(300,"keyboard"))},disabled:!g(`${s}.enabled`),start:u===0,end:u===d.length-1}),h&&l.createElement(b,{style:k.renderable},l.createElement(h,{disabled:!g(`${s}.enabled`)})))}))})),l.createElement(b,{style:k.space}))}const fe=Ee(N.name);let lt=function(){function n(){w(this,n)}return S(n,[{key:"start",value:function(){ot(fe)}},{key:"stop",value:function(){fe.unpatchAll()}},{key:"settings",value:function(){return l.createElement(st,null)}}]),n}();var ut=new lt;return ut})();
