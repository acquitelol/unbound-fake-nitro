(function(){function k(r,o){if(!(r instanceof o))throw new TypeError("Cannot call a class as a function")}function q(r,o){for(var t=0;t<o.length;t++){var e=o[t];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(r,e.key,e)}}function w(r,o,t){return o&&q(r.prototype,o),t&&q(r,t),r}var me="FakeNitro",he="rosie.fakenitro",ye="http://rosies-macbook-air.local:5496/bundle.js",ge="1.0.7",ve="ic_nitro_rep_24px",be="Adds an authentic pseudo-nitro experience to the client, ranging from free emojis to image banners.",_e=[{name:"Rosie<3",id:"588262373488590878"}],T={name:me,id:he,bundle:ye,version:ge,icon:ve,description:be,authors:_e};const{utilities:Y,metro:E,components:Ee,assets:{getIDByName:P},storage:{useSettingsStore:K,get:ke,set:we,on:mt},patcher:{createPatcher:Se}}=window.unbound;E.stores.Users;const Pe=window.ReactNative,u=window.React,[Q,Re,D]=E.findByProps({params:["canUseEmojisEverywhere"],lazy:!0},{params:["uploadLocalFiles"],lazy:!0},{params:["sendMessage","receiveMessage"],lazy:!0},{bulk:!0}),{ScrollView:Oe,TouchableOpacity:W,View:b,LayoutAnimation:{create:L,configureNext:N},FlatList:ht}=Pe,$=function(r){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return ke(T.name,r,o)},$e=function(r,o){return we(T.name,r,o)},je=function(r,o,t){return Object.values(o).map(function(e){let{patches:n}=e;Object.values(n).forEach(function(c){let{key:i}=c;return r.set(`${i}.enabled`,t)})})};function s(r,o,t){return o in r?Object.defineProperty(r,o,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[o]=t,r}function F(r,o){return F=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e},F(r,o)}function R(r,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(o&&o.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),o&&F(r,o)}function C(r){return C=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},C(r)}function Ie(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function xe(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function Te(r){return r&&typeof Symbol<"u"&&r.constructor===Symbol?"symbol":typeof r}function Be(r,o){return o&&(Te(o)==="object"||typeof o=="function")?o:xe(r)}function O(r){var o=Ie();return function(){var e=C(r),n;if(o){var c=C(this).constructor;n=Reflect.construct(e,arguments,c)}else n=e.apply(this,arguments);return Be(this,n)}}let _=function(){function r(){k(this,r)}return w(r,null,[{key:"get",value:function(o,t){var e;return(e=$(`${this.key}.${o}`))!=null?e:t}},{key:"set",value:function(o,t){return $e(`${this.key}.${o}`,t)}},{key:"enabled",get:function(){return this.get("enabled")}},{key:"patch",value:function(o){}},{key:"render",value:function(o){}}]),r}();s(_,"key",void 0),s(_,"title",void 0),s(_,"subtitle",void 0),s(_,"icon",void 0);const{findStore:Ae}=E,Ue=Ae("SelectedGuild");let B=function(r){R(t,r);var o=O(t);function t(){return k(this,t),o.apply(this,arguments)}return w(t,null,[{key:"parseEmojis",value:function(e){!e||!e.validNonShortcutEmojis||!this.enabled||(e.validNonShortcutEmojis.forEach(function(n,c){var i,a;(n.guildId!==Ue.getGuildId()||n.animated)&&(e.content=e.content.replace(`<${n.animated?"a":""}:${(i=n.originalName)!=null?i:n.name}:${n.id}>`,n.url.replace("webp","png").replace(/size=\d+/,`size=48&quality=lossless&name=${(a=n.originalName)!=null?a:n.name}`)),delete e.validNonShortcutEmojis[c])}),e.validNonShortcutEmojis=e.validNonShortcutEmojis.filter(function(n){return n}))}},{key:"patch",value:function(e){var n=this;e.before(D,"sendMessage",function(c,i){let[,a]=i;return n.parseEmojis(a)}),e.before(Re,"uploadLocalFiles",function(c,i){let[{parsedMessage:a}]=i;return n.parseEmojis(a)})}}]),t}(_);s(B,"key","freeEmojis"),s(B,"title","Free Emojis"),s(B,"subtitle","Allows you to send any custom or animated emoji as an image/gif link."),s(B,"icon","ic_emoji_24px");const{findStore:Ne,findByName:Ce}=E,{getCustomEmojiById:ze}=Ne("Emoji"),X=Ce("RowManager");let j=function(r){R(t,r);var o=O(t);function t(){return k(this,t),o.apply(this,arguments)}return w(t,null,[{key:"patch",value:function(e){var n=this;e.before(X.prototype,"generate",function(c,i){var a,l,d;let[p]=i;if(p.rowType!==1||!((a=p.message)!=null&&a.content)||!n.enabled)return;let m=p.message.content;const h=n.emojiLinkRegex;if(typeof m!="string"||!m.match(h))return;let f=m.slice((l=m.match(h))==null?void 0:l.index).trim().split(`
`);if(!f.every(function(g){return g.match(h)}))return;m=m.slice(0,(d=m.match(h))==null?void 0:d.index),m=m.replace(/  /g,function(){return` ${f.shift()} `}).trim(),f.length&&(m+=` ${f.join(" ")}`);const y=p.message.embeds.filter(function(g){return!(g.type==="image"&&g.url.match(h))});p.message.content=m,p.message.embeds=y,p.__fakenitro=!0}),e.after(X.prototype,"generate",function(c,i,a){var l;let[d]=i;if(d.rowType!==1||!d.__fakenitro||!Array.isArray(a.message.content)||!n.enabled)return;const{content:p}=a.message;if(!Array.isArray(p))return;const m=n.emojiLinkRegex,h=p.every(function(f){return!!(f.type==="link"&&f.target.match(m)||f.type==="text"&&f.content===" ")});for(let f=0;f<p.length;f++){const y=p[f];if(y.type!=="link")continue;const g=y.target.match(m);if(!g)continue;const v=`${g[0]}?size=4096`,pe=ze(g[1]);p[f]={type:"customEmoji",id:g[1],alt:(l=pe?.name)!=null?l:"<invalid>",src:v,frozenSrc:v.replace("gif","webp"),jumboable:h?!0:void 0}}})}}]),t}(_);s(j,"key","realEmojis"),s(j,"title","Real Emojis"),s(j,"subtitle","Formats fake nitro emoji links into real emojis by parsing the links when rendering the chat."),s(j,"icon","ic_double_down_arrow"),s(j,"emojiLinkRegex",/https:\/\/cdn.discordapp.com\/emojis\/(\d+)\.\w+/);const{findStore:Z}=E,Me=Z("Stickers"),De=Z("Channel");let A=function(r){R(t,r);var o=O(t);function t(){return k(this,t),o.apply(this,arguments)}return w(t,null,[{key:"getStickerUrl",value:function(e){return`https://media.discordapp.net/stickers/${e}.png?size=160&quality=lossless`}},{key:"canUseSticker",value:function(e,n){return!e.guild_id||e.guild_id===De.getChannel(n).guild_id}},{key:"patch",value:function(e){var n=this;e.instead(D,"sendStickers",function(c,i,a){var l;if(!n.enabled)return a.apply(c,i);const[d,p,m,h]=i,f=p.map(function(v){return Me.getStickerById(v)}),y=(l=f?.filter)==null?void 0:l.call(f,function(v){return!n.canUseSticker(v,d)});if(y.length<1)return a.apply(c,i);const g=y.map(function(v){return n.getStickerUrl(v.id)}).join(`
`);D.sendMessage(d,{content:g},null,h)})}}]),t}(_);s(A,"key","freeStickers"),s(A,"title","Free Stickers"),s(A,"subtitle","Turns invalid stickers into images when sent. Note that animated stickers won't animate :c"),s(A,"icon","StickerIcon");const{findByName:Le,findStore:Fe,common:{Clipboard:Ge},components:{Redesign:He}}=E,{findInReactTree:Je}=Y,Ve=Fe("UserProfile"),qe=Le("EditProfileTheme",{interop:!1}),Ye=function(r){let{getText:o}=r,t;const[e,n]=u.useState(!1);return u.createElement(He.IconButton,{icon:P("ic_message_copy"),variant:"primary",size:"md",loading:e,onPress:function(){clearTimeout(t),n(function(c){return!c}),t=setTimeout(function(){return n(function(c){return!c})},400),Ge.setString(o())}})};let S=function(r){R(t,r);var o=O(t);function t(){return k(this,t),o.apply(this,arguments)}return w(t,null,[{key:"is3y3",value:function(e){return Boolean([...e].some(function(n){return 917504<n.codePointAt(0)&&n.codePointAt(0)<917631}))}},{key:"encode",value:function(e){return[...e].map(function(n){return 0<n.codePointAt(0)&&n.codePointAt(0)<127?`${String.fromCodePoint(n.codePointAt(0)+917504)}`:n}).join("")}},{key:"decode",value:function(e){return[...e].map(function(n){return 917504<n.codePointAt(0)&&n.codePointAt(0)<917631?String.fromCodePoint(n.codePointAt(0)-917504):n}).join("")}},{key:"patch",value:function(e){var n=this;e.after(Ve,"getUserProfile",function(c,i,a){if(!a||!n.is3y3(a.bio)||!n.enabled)return;const l=n.decode(a.bio),d=l.match(n.colorExpression);!d||(d.shift(),a.themeColors=d.map(function(p){return parseInt("0x"+p.slice(1))}),a.premiumType=2,a.bio=l.replace(n.replacingExpression,""))}),e.after(qe,"default",function(c,i,a){var l;if(!n.enabled)return;const d=Je(a,function(h){return h?.children.find(function(f){var y;return((y=f?.type)==null?void 0:y.name)==="ColorSwatch"})}),p=function(h){var f;return(f=d?.children)==null?void 0:f.find(function(y){var g,v;return((g=y?.type)==null?void 0:g.name)==="ColorSwatch"&&((v=y?.props)==null?void 0:v.description)===h})},m=function(h){return h.props.color.toString(16).padStart(6,"0")};(l=d.children)==null||l.unshift(u.createElement(b,{style:{marginTop:5,marginRight:8}},u.createElement(Ye,{getText:function(){const h=p("Primary"),f=p("Accent");return n.encode(`[#${m(h)},#${m(f)}]`)}})))})}}]),t}(_);s(S,"key","profileThemes"),s(S,"title","Profile Themes"),s(S,"subtitle","Uses 3y3 text to colorize profiles. Copy your own from the 'Profile Theme' section."),s(S,"icon","ic_custom_color"),s(S,"colorExpression",/\[(\#[0-9a-fA-F]{6})\s*,\s*(\#[0-9a-fA-F]{6})\]/),s(S,"replacingExpression",new RegExp(S.colorExpression,"g"));var Ke=Object.defineProperty,z=Object.getOwnPropertySymbols,ee=Object.prototype.hasOwnProperty,te=Object.prototype.propertyIsEnumerable,ne=(r,o,t)=>o in r?Ke(r,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[o]=t,Qe=(r,o)=>{for(var t in o||(o={}))ee.call(o,t)&&ne(r,t,o[t]);if(z)for(var t of z(o))te.call(o,t)&&ne(r,t,o[t]);return r},We=(r,o)=>{var t={};for(var e in r)ee.call(r,e)&&o.indexOf(e)<0&&(t[e]=r[e]);if(r!=null&&z)for(var e of z(r))o.indexOf(e)<0&&te.call(r,e)&&(t[e]=r[e]);return t},re;const{common:{StyleSheet:Xe,Theme:G},components:{Forms:H}}=E,oe=function(r){return Xe.createStyles(r)}({navigation:{paddingHorizontal:16,paddingBottom:16,backgroundColor:G.unsafe_rawColors.PRIMARY_800},shadow:{shadowColor:"#000",shadowOffset:{width:1,height:4},shadowOpacity:.15,shadowRadius:4.65,elevation:8},section:{marginTop:-20,marginHorizontal:16,shadowColor:"#000",shadowOffset:{width:1,height:4},shadowOpacity:.15,shadowRadius:4.65,elevation:8,height:"100%"},sectionIcon:{width:16,height:16,marginHorizontal:4},renderable:{backgroundColor:(re=G.colors.CARD_PRIMARY_BG)!=null?re:G.colors.BACKGROUND_PRIMARY},space:{marginBottom:50}}),Ze=[{title:"Disable",value:!1},{title:"Enable",value:!0}],et=function(r){let o=r,{title:t,icon:e,patches:n,children:c,style:i}=o,a=We(o,["title","icon","patches","children","style"]);const[l,d]=u.useState($(`${t}.hidden`,!1)),p=Object.keys(n).every(function(f){return!$(`${f}.enabled`)}),m=K(T.name),h=oe();return u.useEffect(function(){m.set(`${t}.hidden`,l)},[l]),u.createElement(H.FormSection,Qe({title:t,style:[i,{opacity:p?.5:1}],icon:u.createElement(b,{style:{flexDirection:"row"}},e,u.createElement(W,{onPress:function(){Object.keys(n).forEach(function(f){return m.set(`${f}.enabled`,p)}),N(L(300,"keyboard"))}},u.createElement(H.FormRow.Icon,{source:P(p?"Small":"Check"),style:h.sectionIcon})),u.createElement(W,{onPress:function(){d(function(f){return!f}),N({duration:300,create:{type:"keyboard",property:"opacity"},update:{type:"easeInEaseOut"},delete:{type:"easeInEaseOut",property:"opacity"}})}},u.createElement(H.FormRow.Icon,{source:P(`ic_arrow${l?"":"_down"}`),style:h.sectionIcon})))},a),!l&&c)},ie={serverInvite:"https://discord.gg/TeRQEPb",bannersSource:"https://raw.githubusercontent.com/Discord-Custom-Covers/usrbg/master/dist/usrbg.json"},{findByProps:ae,components:{Redesign:ce}}=E,tt=ae("default","getUserBannerURL",{lazy:!0}),nt=ae("openURL","openDeeplink",{lazy:!0});let I=function(r){R(t,r);var o=O(t);function t(){return k(this,t),o.apply(this,arguments)}return w(t,null,[{key:"fetchBanners",value:function(){var e=this;return new Promise(function(n,c){fetch(ie.bannersSource).then(function(i){return i.ok||c("Failed to fetch badges."),i.json()}).then(function(i){e.banners=i,n(1)}).catch(console.error)})}},{key:"getBanner",value:function(e){var n;const c=(n=this.banners)==null?void 0:n.find(function(i){return i.uid===e.id});return!(e!=null&&e.banner)&&c?c.img:e.banner}},{key:"patch",value:function(e){var n=this;e.after(tt,"getUserBannerURL",function(c,i){let[a]=i;return n.enabled?n.banners?n.getBanner(a):(n.fetchBanners(),a.banner):a.banner})}},{key:"render",value:function(e){let{disabled:n}=e;const[c,i]=u.useState(!1);return u.createElement(b,{style:{flexDirection:"row",marginHorizontal:16,marginBottom:16}},u.createElement(ce.Button,{text:"Join Server",onPress:function(){return nt.openDeeplink(ie.serverInvite)},style:{flex:.5,marginRight:10},variant:"primary",size:"md",icon:P("icon-invite"),iconPosition:"start",disabled:n}),u.createElement(ce.Button,{text:"Reload Banners",onPress:function(){i(!0),t.fetchBanners().then(function(){return i(!1)}).catch(function(a){return console.error(a)})},style:{flex:.5},variant:"primary-alt",size:"md",icon:P("ic_message_retry"),iconPosition:"start",disabled:n,loading:c}))}}]),t}(_);s(I,"key","customBanner"),s(I,"title","Custom Banner"),s(I,"subtitle","Displays custom banners with the UserBG API. Request your own at the server below."),s(I,"icon","ic_profile_24px"),s(I,"banners",void 0);const{findByName:se,findByProps:le,common:{i18n:{Messages:M}}}=E,rt=le("ButtonColors",{lazy:!0}),ot=le("TextStyleSheet",{lazy:!0}),it=se("SearchableSettingsList",{lazy:!0}),at=se("UpsellCard",{interop:!1,lazy:!0});let x=function(r){R(t,r);var o=O(t);function t(){return k(this,t),o.apply(this,arguments)}return w(t,null,[{key:"patch",value:function(e){var n=this;e.instead(rt,"default",function(c,i,a){if(!(i[0].text===M.EMOJI_POPOUT_PREMIUM_CTA&&n.enabled))return a.apply(c,i)}),e.instead(b,"render",function(c,i,a){var l;if(!([M.PREMIUM,"Nitro"].includes((l=i[0])==null?void 0:l.accessibilityLabel)&&n.enabled))return a.apply(c,i)}),e.instead(at,"default",function(c,i,a){if(!n.enabled)return a.apply(c,i)}),e.before(ot.Text,"render",function(c,i){!n.enabled||typeof i[0].children!="string"||n.props.forEach(function(a){var l,d,p;const m=M[`EMOJI_POPOUT_${a}`],h=M[`EMOJI_POPOUT_PREMIUM_${a}`];!((l=i[0].children)!=null&&l.includes(m))||(i[0].children=(p=(d=i[0].children)==null?void 0:d.replace)==null?void 0:p.call(d,m,h))})}),e.before(it.SearchableSettingsList,"type",function(c,i){let[{sections:a}]=i;const l=a.find(function(d){return d.settings.includes("PREMIUM")});l&&(l.settings=l.settings.filter(function(d){return d!=="PREMIUM"}))})}}]),t}(_);s(x,"key","hideUpsells"),s(x,"title","Hide Upsells"),s(x,"subtitle","Hide all 'Get Nitro' upsells throughout Discord (doesn't include boosting upsells)"),s(x,"icon","img_nitro_boosted"),s(x,"props",["CURRENT_GUILD_DESCRIPTION","JOINED_GUILD_DESCRIPTION","UNJOINED_DISCOVERABLE_GUILD_DESCRIPTION"]);let U=function(r){R(t,r);var o=O(t);function t(){return k(this,t),o.apply(this,arguments)}return w(t,null,[{key:"patch",value:function(e){var n=this;Object.keys(Q).forEach(function(c){c.includes("can")&&e.instead(Q,c,function(i,a,l){return n.enabled?!0:l.apply(i,a)})})}}]),t}(_);s(U,"key","pseudoPatches"),s(U,"title","Pseudo Patches"),s(U,"subtitle","Patches several 'can' functions. Must be on to use most of the features in this plugin."),s(U,"icon","ic_message_retry");const J={client:{icon:"ic_nitro_rep_24px",patches:{hideUpsells:x,pseudoPatches:U}},chat:{icon:"img_nitro_star",patches:{freeEmojis:B,realEmojis:j,freeStickers:A}},profile:{icon:"ic_profile_24px",patches:{profileThemes:S,customBanner:I}}},ct=function(r){return Object.values(J).forEach(function(o){Object.values(o.patches).forEach(function(t){var e;try{t.patch(r)}catch(n){console.error(`Patch '${t.title}' (${t.key}) errored with '${(e=n.message)!=null?e:n}'.`)}})})},{components:{Forms:st,Redesign:{TableSwitchRow:lt,TableRowIcon:ut},Button:V}}=E,{AdvancedSearch:ue}=Ee,fe={type:"FAKE_NITRO"};function ft(){const r=K(T.name),[o,t]=ue.useAdvancedSearch(fe),e=oe();return u.createElement(Oe,null,u.createElement(b,{style:e.navigation},u.createElement(b,{style:e.shadow},u.createElement(ue,{searchContext:fe,controls:t})),u.createElement(b,{style:e.shadow},u.createElement(b,{style:{flexDirection:"row"}},Ze.map(function(n,c,i){let{title:a,value:l}=n,{length:d}=i;return u.createElement(V,{color:V.Colors.BRAND,text:a,size:V.Sizes.MEDIUM,onPress:function(){je(r,J,l),N(L(300,"keyboard"))},style:{marginTop:16,borderRadius:12,marginHorizontal:4,flex:1/d}})})))),u.createElement(b,{style:e.section},Object.entries(J).map(function(n){let[c,{icon:i,patches:a}]=n;return u.createElement(et,{key:c,title:Y.capitalize(c),icon:u.createElement(st.FormRow.Icon,{style:e.sectionIcon,source:P(i)}),inset:!0,sectionBodyStyle:{borderRadius:24},uppercaseTitle:!1,patches:a},Object.values(a).filter(function(l){let{title:d,subtitle:p}=l;return[d,p].some(function(m){return m.toLowerCase().includes(o.toLowerCase())})}).map(function(l,d,p){let{key:m,title:h,subtitle:f,icon:y,render:g}=l;return u.createElement(u.Fragment,null,u.createElement(b,{style:$(`${m}.enabled`)?{}:{opacity:.5}},u.createElement(lt,{label:h,subLabel:f,icon:u.createElement(ut,{source:typeof y=="string"?P(y):y}),value:$(`${m}.enabled`),onValueChange:function(v){r.set(`${m}.enabled`,JSON.parse(v)),N(L(300,"keyboard"))},start:d===0,end:d===p.length-1})),g&&u.createElement(b,{style:e.renderable},u.createElement(g,{disabled:!$(`${m}.enabled`)})))}))})),u.createElement(b,{style:e.space}))}const de=Se(T.name);let dt=function(){function r(){k(this,r)}return w(r,[{key:"start",value:function(){ct(de)}},{key:"stop",value:function(){de.unpatchAll()}},{key:"settings",value:function(){return u.createElement(ft,null)}}]),r}();var pt=new dt;return pt})();
