(function(){function k(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function X(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function P(t,r,e){return r&&X(t.prototype,r),e&&X(t,e),t}var ge="FakeNitro",ve="rosie.fakenitro",be="bundle.js",Ee="1.0.9",_e="ic_nitro_rep_24px",ke="Adds an authentic pseudo-nitro experience to the client, ranging from free emojis to image banners.",Pe=[{name:"Rosie<3",id:"588262373488590878"}],A={name:ge,id:ve,main:be,version:Ee,icon:_e,description:ke,authors:Pe};const{utilities:Z,metro:v,components:Ie,assets:{getIDByName:I},storage:{useSettingsStore:ee,get:we,set:Se,on:Oe},patcher:{createPatcher:Re}}=window.unbound;v.stores.Users;const V=window.ReactNative,f=window.React,[te,$e,q]=v.findByProps({params:["canUseEmojisEverywhere"],lazy:!0},{params:["uploadLocalFiles"],lazy:!0},{params:["sendMessage","receiveMessage"],lazy:!0},{bulk:!0}),z=v.findByProps("FormRow","FormSection"),{ScrollView:je,TouchableOpacity:ne,View:E,LayoutAnimation:{create:Y,configureNext:L},FlatList:It}=V,R=function(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return we(A.name,t,r)},Te=function(t,r){return Se(A.name,t,r)},Ae=function(t,r,e){return Object.values(r).map(function(n){let{patches:o}=n;Object.values(o).forEach(function(c){let{key:i}=c;return t.set(`${i}.enabled`,e)})})};function s(t,r,e){return r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}function K(t,r){return K=Object.setPrototypeOf||function(n,o){return n.__proto__=o,n},K(t,r)}function w(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),r&&K(t,r)}function F(t){return F=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},F(t)}function Ce(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function xe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Be(t){return t&&typeof Symbol<"u"&&t.constructor===Symbol?"symbol":typeof t}function Ne(t,r){return r&&(Be(r)==="object"||typeof r=="function")?r:xe(t)}function S(t){var r=Ce();return function(){var n=F(t),o;if(r){var c=F(this).constructor;o=Reflect.construct(n,arguments,c)}else o=n.apply(this,arguments);return Ne(this,o)}}let _=function(){function t(){k(this,t)}return P(t,null,[{key:"get",value:function(r,e){var n;return(n=R(`${this.key}.${r}`))!=null?n:e}},{key:"set",value:function(r,e){return Te(`${this.key}.${r}`,e)}},{key:"enabled",get:function(){return this.get("enabled")}},{key:"patch",value:function(r){}},{key:"render",value:function(r){}}]),t}();s(_,"key",void 0),s(_,"title",void 0),s(_,"subtitle",void 0),s(_,"icon",void 0);const{findStore:Ue}=v,ze=Ue("SelectedGuild",{lazy:!0});let C=function(t){w(e,t);var r=S(e);function e(){return k(this,e),r.apply(this,arguments)}return P(e,null,[{key:"parseEmojis",value:function(n){!n||!n.validNonShortcutEmojis||!this.enabled||(n.validNonShortcutEmojis.forEach(function(o,c){var i,a;(o.guildId!==ze.getGuildId()||o.animated)&&(n.content=n.content.replace(`<${o.animated?"a":""}:${(i=o.originalName)!=null?i:o.name}:${o.id}>`,o.url.replace("webp","png").replace(/size=\d+/,`size=48&quality=lossless&name=${(a=o.originalName)!=null?a:o.name}`)),delete n.validNonShortcutEmojis[c])}),n.validNonShortcutEmojis=n.validNonShortcutEmojis.filter(function(o){return o}))}},{key:"patch",value:function(n){var o=this;n.before(q,"sendMessage",function(c,i){let[,a]=i;return o.parseEmojis(a)}),n.before($e,"uploadLocalFiles",function(c,i){let[{parsedMessage:a}]=i;return o.parseEmojis(a)})}}]),e}(_);s(C,"key","freeEmojis"),s(C,"title","Free Emojis"),s(C,"subtitle","Allows you to send any custom or animated emoji as an image/gif link."),s(C,"icon","ic_emoji_24px");const{findStore:Le,findByName:Fe}=v,{getCustomEmojiById:Me}=Le("Emoji"),re=Fe("RowManager");let $=function(t){w(e,t);var r=S(e);function e(){return k(this,e),r.apply(this,arguments)}return P(e,null,[{key:"patch",value:function(n){var o=this;n.before(re.prototype,"generate",function(c,i){var a,u,d;let[l]=i;if(l.rowType!==1||!((a=l.message)!=null&&a.content)||!o.enabled)return;let p=l.message.content;const y=o.emojiLinkRegex;if(typeof p!="string"||!p.match(y))return;let m=p.slice((u=p.match(y))==null?void 0:u.index).trim().split(`
`);if(!m.every(function(g){return g.match(y)}))return;p=p.slice(0,(d=p.match(y))==null?void 0:d.index),p=p.replace(/  /g,function(){return` ${m.shift()} `}).trim(),m.length&&(p+=` ${m.join(" ")}`);const h=l.message.embeds.filter(function(g){return!(g.type==="image"&&g.url.match(y))});l.message.content=p,l.message.embeds=h,l.__fakenitro=!0}),n.after(re.prototype,"generate",function(c,i,a){var u;let[d]=i;if(d.rowType!==1||!d.__fakenitro||!Array.isArray(a.message.content)||!o.enabled)return;const{content:l}=a.message;if(!Array.isArray(l))return;const p=o.emojiLinkRegex,y=l.every(function(m){return!!(m.type==="link"&&m.target.match(p)||m.type==="text"&&m.content===" ")});for(let m=0;m<l.length;m++){const h=l[m];if(h.type!=="link")continue;const g=h.target.match(p);if(!g)continue;const b=`${g[0]}?size=4096`,he=Me(g[1]);l[m]={type:"customEmoji",id:g[1],alt:(u=he?.name)!=null?u:"<invalid>",src:b,frozenSrc:b.replace("gif","webp"),jumboable:y?!0:void 0}}})}}]),e}(_);s($,"key","realEmojis"),s($,"title","Real Emojis"),s($,"subtitle","Formats fake nitro emoji links into real emojis by parsing the links when rendering the chat."),s($,"icon","ArrowsUpDownIcon"),s($,"emojiLinkRegex",/https:\/\/cdn.discordapp.com\/emojis\/(\d+)\.\w+/);const{findStore:oe}=v,De=oe("Stickers"),Ge=oe("Channel");let x=function(t){w(e,t);var r=S(e);function e(){return k(this,e),r.apply(this,arguments)}return P(e,null,[{key:"getStickerUrl",value:function(n){return`https://media.discordapp.net/stickers/${n}.png?size=160&quality=lossless`}},{key:"canUseSticker",value:function(n,o){return!n.guild_id||n.guild_id===Ge.getChannel(o).guild_id}},{key:"patch",value:function(n){var o=this;n.instead(q,"sendStickers",function(c,i,a){var u;if(!o.enabled)return a.apply(c,i);const[d,l,p,y]=i,m=l.map(function(b){return De.getStickerById(b)}),h=(u=m?.filter)==null?void 0:u.call(m,function(b){return!o.canUseSticker(b,d)});if(h.length<1)return a.apply(c,i);const g=h.map(function(b){return o.getStickerUrl(b.id)}).join(`
`);q.sendMessage(d,{content:g},null,y)})}}]),e}(_);s(x,"key","freeStickers"),s(x,"title","Free Stickers"),s(x,"subtitle","Turns invalid stickers into images when sent. Note that animated stickers won't animate :c"),s(x,"icon","StickerIcon");const{findByName:He,findStore:Je,common:{Clipboard:Ve},components:{Redesign:qe}}=v,{findInReactTree:Ye}=Z,Ke=Je("UserProfile"),Qe=He("EditProfileTheme",{interop:!1}),We=function(t){let{getText:r}=t,e;const[n,o]=f.useState(!1);return f.createElement(qe.IconButton,{icon:I("ic_message_copy"),variant:"primary",size:"md",loading:n,onPress:function(){clearTimeout(e),o(function(c){return!c}),e=setTimeout(function(){return o(function(c){return!c})},400),Ve.setString(r())}})};let O=function(t){w(e,t);var r=S(e);function e(){return k(this,e),r.apply(this,arguments)}return P(e,null,[{key:"is3y3",value:function(n){return Boolean([...n].some(function(o){return 917504<o.codePointAt(0)&&o.codePointAt(0)<917631}))}},{key:"encode",value:function(n){return[...n].map(function(o){return 0<o.codePointAt(0)&&o.codePointAt(0)<127?`${String.fromCodePoint(o.codePointAt(0)+917504)}`:o}).join("")}},{key:"decode",value:function(n){return[...n].map(function(o){return 917504<o.codePointAt(0)&&o.codePointAt(0)<917631?String.fromCodePoint(o.codePointAt(0)-917504):o}).join("")}},{key:"patch",value:function(n){var o=this;n.after(Ke,"getUserProfile",function(c,i,a){if(!a||!o.is3y3(a.bio)||!o.enabled)return;const u=o.decode(a.bio),d=u.match(o.colorExpression);!d||(d.shift(),a.themeColors=d.map(function(l){return parseInt("0x"+l.slice(1))}),a.premiumType=2,a.bio=u.replace(o.replacingExpression,""))}),n.after(Qe,"default",function(c,i,a){var u;if(!o.enabled)return;const d=Ye(a,function(y){return y?.children.find(function(m){var h;return((h=m?.type)==null?void 0:h.name)==="ColorSwatch"})}),l=function(y){var m;return(m=d?.children)==null?void 0:m.find(function(h){var g,b;return((g=h?.type)==null?void 0:g.name)==="ColorSwatch"&&((b=h?.props)==null?void 0:b.description)===y})},p=function(y){return y.props.color.toString(16).padStart(6,"0")};(u=d.children)==null||u.unshift(f.createElement(E,{style:{marginTop:5,marginRight:8}},f.createElement(We,{getText:function(){const y=l("Primary"),m=l("Accent");return o.encode(`[#${p(y)},#${p(m)}]`)}})))})}}]),e}(_);s(O,"key","profileThemes"),s(O,"title","Profile Themes"),s(O,"subtitle","Uses 3y3 text to colorize profiles. Copy your own from the 'Profile Theme' section."),s(O,"icon","ic_custom_color"),s(O,"colorExpression",/\[(\#[0-9a-fA-F]{6})\s*,\s*(\#[0-9a-fA-F]{6})\]/),s(O,"replacingExpression",new RegExp(O.colorExpression,"g"));var Xe=Object.defineProperty,M=Object.getOwnPropertySymbols,ie=Object.prototype.hasOwnProperty,ae=Object.prototype.propertyIsEnumerable,ce=(t,r,e)=>r in t?Xe(t,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[r]=e,Ze=(t,r)=>{for(var e in r||(r={}))ie.call(r,e)&&ce(t,e,r[e]);if(M)for(var e of M(r))ae.call(r,e)&&ce(t,e,r[e]);return t},et=(t,r)=>{var e={};for(var n in t)ie.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&M)for(var n of M(t))r.indexOf(n)<0&&ae.call(t,n)&&(e[n]=t[n]);return e},se;const{common:{StyleSheet:tt,Theme:D}}=v,le=function(t){return tt.createStyles(t)}({navigation:{paddingHorizontal:16,paddingBottom:16,backgroundColor:D.unsafe_rawColors.PRIMARY_800},shadow:{shadowColor:"#000",shadowOffset:{width:1,height:4},shadowOpacity:.15,shadowRadius:4.65,elevation:8},section:{marginTop:-20,marginHorizontal:16,shadowColor:"#000",shadowOffset:{width:1,height:4},shadowOpacity:.15,shadowRadius:4.65,elevation:8,height:"100%"},sectionIcon:{width:16,height:16,marginHorizontal:4},renderable:{backgroundColor:(se=D.colors.CARD_PRIMARY_BG)!=null?se:D.colors.BACKGROUND_PRIMARY},space:{marginBottom:50},search:{margin:0,marginTop:5,padding:10,borderBottomWidth:0,background:"none",backgroundColor:"none"},icon:{tintColor:D.colors.INTERACTIVE_NORMAL,width:16,height:16}}),nt=[{title:"Disable",value:!1},{title:"Enable",value:!0}],rt=function(t){let r=t,{title:e,icon:n,patches:o,children:c,style:i}=r,a=et(r,["title","icon","patches","children","style"]);const[u,d]=f.useState(R(`${e}.hidden`,!1)),l=Object.keys(o).every(function(m){return!R(`${m}.enabled`)}),p=ee(A.name),y=le();return f.useEffect(function(){p.set(`${e}.hidden`,u)},[u]),f.createElement(z.FormSection,Ze({title:e,style:[i,{opacity:l?.5:1}],icon:f.createElement(E,{style:{flexDirection:"row"}},n,f.createElement(ne,{onPress:function(){Object.keys(o).forEach(function(m){return p.set(`${m}.enabled`,l)}),L(Y(300,"keyboard"))}},f.createElement(z.FormRow.Icon,{source:I(l?"Small":"Check"),style:y.sectionIcon})),f.createElement(ne,{onPress:function(){d(function(m){return!m}),L({duration:300,create:{type:"keyboard",property:"opacity"},update:{type:"easeInEaseOut"},delete:{type:"easeInEaseOut",property:"opacity"}})}},f.createElement(z.FormRow.Icon,{source:I(`ic_arrow${u?"":"_down"}`),style:y.sectionIcon})))},a),!u&&c)},ue={serverInvite:"https://discord.gg/TeRQEPb",bannersSource:"https://raw.githubusercontent.com/Discord-Custom-Covers/usrbg/master/dist/usrbg.json"},{findByProps:fe,components:{Redesign:de}}=v,ot=fe("default","getUserBannerURL",{lazy:!0}),it=fe("openURL","openDeeplink",{lazy:!0});let j=function(t){w(e,t);var r=S(e);function e(){return k(this,e),r.apply(this,arguments)}return P(e,null,[{key:"fetchBanners",value:function(){var n=this;return new Promise(function(o,c){fetch(ue.bannersSource).then(function(i){return i.ok||c("Failed to fetch badges."),i.json()}).then(function(i){n.banners=i,o(1)}).catch(console.error)})}},{key:"getBanner",value:function(n){var o;const c=(o=this.banners)==null?void 0:o.find(function(i){return i.uid===n.id});return!(n!=null&&n.banner)&&c?c.img:n.banner}},{key:"patch",value:function(n){var o=this;n.after(ot,"getUserBannerURL",function(c,i){let[a]=i;return o.enabled?o.banners?o.getBanner(a):(o.fetchBanners(),a.banner):a.banner})}},{key:"render",value:function(n){let{disabled:o}=n;const[c,i]=f.useState(!1);return f.createElement(E,{style:{flexDirection:"row",marginHorizontal:16,marginBottom:16}},f.createElement(de.Button,{text:"Join Server",onPress:function(){return it.openDeeplink(ue.serverInvite)},style:{flex:.5,marginRight:10},variant:"primary",size:"md",icon:I("icon-invite"),iconPosition:"start",disabled:o}),f.createElement(de.Button,{text:"Reload Banners",onPress:function(){i(!0),e.fetchBanners().then(function(){return i(!1)}).catch(function(a){return console.error(a)})},style:{flex:.5},variant:"primary-alt",size:"md",icon:I("ic_message_retry"),iconPosition:"start",disabled:o,loading:c}))}}]),e}(_);s(j,"key","customBanner"),s(j,"title","Custom Banner"),s(j,"subtitle","Displays custom banners with the UserBG API. Request your own at the server below."),s(j,"icon","ic_profile_24px"),s(j,"banners",void 0);const{findByName:at,findByProps:G,common:{i18n:{Messages:B}}}=v,ct=G("ButtonColors",{lazy:!0}),st=G("TextStyleSheet",{lazy:!0}),lt=G("SearchableSettingsList",{lazy:!0}),ut=at("UpsellCard",{interop:!1,lazy:!0}),ft=G("TryItOutUpsellCard",{lazy:!0});let T=function(t){w(e,t);var r=S(e);function e(){return k(this,e),r.apply(this,arguments)}return P(e,null,[{key:"patch",value:function(n){var o=this;n.instead(ct,"default",function(c,i,a){if(!([B.APP_ICON_UPSELL,B.EMOJI_POPOUT_PREMIUM_CTA].includes(i[0].text)&&o.enabled))return a.apply(c,i)}),n.instead(E,"render",function(c,i,a){var u;if(!([B.PREMIUM,"Nitro"].includes((u=i[0])==null?void 0:u.accessibilityLabel)&&o.enabled))return a.apply(c,i)}),n.instead(ut,"default",function(c,i,a){if(!o.enabled)return a.apply(c,i)}),n.instead(ft,"TryItOutUpsellCard",function(c,i,a){if(!o.enabled)return a.apply(c,i)}),n.before(st.Text,"render",function(c,i){!o.enabled||typeof i[0].children!="string"||o.props.forEach(function(a){var u,d,l;const p=B[`EMOJI_POPOUT_${a}`],y=B[`EMOJI_POPOUT_PREMIUM_${a}`];!((u=i[0].children)!=null&&u.includes(p))||(i[0].children=(l=(d=i[0].children)==null?void 0:d.replace)==null?void 0:l.call(d,p,y))})}),n.before(lt.SearchableSettingsList,"type",function(c,i){let[{sections:a}]=i;const u=a.find(function(d){return d.settings.find(function(l){return l==="PREMIUM"})});u&&(u.settings=u.settings.filter(function(d){return d!=="PREMIUM"}))})}}]),e}(_);s(T,"key","hideUpsells"),s(T,"title","Hide Upsells"),s(T,"subtitle","Hide all 'Get Nitro' upsells throughout Discord (doesn't include boosting upsells)"),s(T,"icon","img_nitro_boosted"),s(T,"props",["CURRENT_GUILD_DESCRIPTION","JOINED_GUILD_DESCRIPTION","UNJOINED_DISCOVERABLE_GUILD_DESCRIPTION"]);let N=function(t){w(e,t);var r=S(e);function e(){return k(this,e),r.apply(this,arguments)}return P(e,null,[{key:"patch",value:function(n){var o=this;Object.keys(te).forEach(function(c){c.includes("can")&&n.instead(te,c,function(i,a,u){return o.enabled?!0:u.apply(i,a)})})}}]),e}(_);s(N,"key","pseudoPatches"),s(N,"title","Pseudo Patches"),s(N,"subtitle","Patches several 'can' functions. Must be on to use most of the features in this plugin."),s(N,"icon","ic_message_retry");var dt=Object.defineProperty,pe=Object.getOwnPropertySymbols,pt=Object.prototype.hasOwnProperty,mt=Object.prototype.propertyIsEnumerable,me=(t,r,e)=>r in t?dt(t,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[r]=e,yt=(t,r)=>{for(var e in r||(r={}))pt.call(r,e)&&me(t,e,r[e]);if(pe)for(var e of pe(r))mt.call(r,e)&&me(t,e,r[e]);return t};const H=v.findByProps("OFFICIAL_ALTERNATE_ICONS",{lazy:!0}),J=v.findByProps("FreemiumAppIconIds",{lazy:!0}),Q=H.OFFICIAL_ALTERNATE_ICONS();let U=function(t){w(e,t);var r=S(e);function e(){return k(this,e),r.apply(this,arguments)}return P(e,null,[{key:"patch",value:function(){var n=this;const o=Q.slice(),c=H.ICONS.slice(),i=yt({},J.FreemiumAppIconIds);Oe("changed",function(a){let{key:u,value:d}=a;u===`${n.key}.enabled`&&(d?(Q.forEach(function(l){return l.isPremium=!1}),H.ICONS.forEach(function(l){l.isPremium=!1}),J.FreemiumAppIconIds=J.MasterAppIconIds):(Q.forEach(function(l,p){return l.isPremium=o[p]}),H.ICONS.forEach(function(l,p){return l.isPremium=c[p]}),J.FreemiumAppIconIds=i))})}}]),e}(_);s(U,"key","appIcons"),s(U,"title","App Icons"),s(U,"subtitle","Enables Discord's fancy custom 'App Icons' without needing nitro."),s(U,"icon","Discord");const W={client:{icon:"ic_nitro_rep_24px",patches:{hideUpsells:T,pseudoPatches:N,appIcons:U}},chat:{icon:"feature_star",patches:{freeEmojis:C,realEmojis:$,freeStickers:x}},profile:{icon:"ic_profile_24px",patches:{profileThemes:O,customBanner:j}}},ht=function(t){return Object.values(W).forEach(function(r){Object.values(r.patches).forEach(function(e){var n;try{e.patch(t)}catch(o){console.error(`Patch '${e.title}' (${e.key}) errored with '${(n=o.message)!=null?n:o}'.`)}})})},{components:{Redesign:{TableSwitchRow:gt,TableRowIcon:vt,Button:bt}}}=v,{Search:Et}=Ie;function _t(){const t=ee(A.name),[r,e]=f.useState(""),n=le();return f.createElement(je,null,f.createElement(E,{style:n.navigation},f.createElement(E,{style:[n.shadow,{marginTop:16}]},f.createElement(Et,{placeholder:"Search...",value:r,onChange:function(o){return e(o)},onClear:function(){return e("")},isClearable:!0,leadingIcon:function(){return f.createElement(V.View,{style:{flex:1,justifyContent:"center",alignItems:"center"}},f.createElement(V.Image,{source:I("Search"),style:n.icon}))}})),f.createElement(E,{style:n.shadow},f.createElement(E,{style:{flexDirection:"row"}},nt.map(function(o,c,i){let{title:a,value:u}=o,{length:d}=i;return f.createElement(bt,{text:a,variant:"primary",size:"md",onPress:function(){Ae(t,W,u),L(Y(300,"keyboard"))},style:{marginTop:16,borderRadius:12,marginHorizontal:4,flex:1/d}})})))),f.createElement(E,{style:n.section},Object.entries(W).map(function(o){let[c,{icon:i,patches:a}]=o;return f.createElement(rt,{key:c,title:Z.capitalize(c),icon:f.createElement(z.FormRow.Icon,{style:n.sectionIcon,source:I(i)}),inset:!0,sectionBodyStyle:{borderRadius:24},uppercaseTitle:!1,patches:a},Object.values(a).filter(function(u){let{title:d,subtitle:l}=u;return[d,l].some(function(p){return p.toLowerCase().includes(r.toLowerCase())})}).map(function(u,d,l){let{key:p,title:y,subtitle:m,icon:h,render:g}=u;return f.createElement(f.Fragment,null,f.createElement(E,{style:R(`${p}.enabled`)?{}:{opacity:.5}},f.createElement(gt,{label:y,subLabel:m,icon:f.createElement(vt,{source:typeof h=="string"?I(h):h}),value:R(`${p}.enabled`),onValueChange:function(b){t.set(`${p}.enabled`,JSON.parse(b)),L(Y(300,"keyboard"))},start:d===0,end:d===l.length-1})),g&&f.createElement(E,{style:n.renderable},f.createElement(g,{disabled:!R(`${p}.enabled`)})))}))})),f.createElement(E,{style:n.space}))}const ye=Re(A.name);let kt=function(){function t(){k(this,t)}return P(t,[{key:"start",value:function(){ht(ye)}},{key:"stop",value:function(){ye.unpatchAll()}},{key:"settings",value:function(){return f.createElement(_t,null)}}]),t}();var Pt=new kt;return Pt})();
