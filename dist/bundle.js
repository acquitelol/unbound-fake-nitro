(function(){function R(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function M(e,r){for(var o=0;o<r.length;o++){var n=r[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function S(e,r,o){return r&&M(e.prototype,r),o&&M(e,o),e}var ce="FakeNitro",se="rosie.fakenitro",le="http://rosies-macbook-air.local:5496/bundle.js",ue="1.0.2",fe="Adds an authentic pseudo-nitro experience to the client, ranging from free emojis to image banners.",de=[{name:"Rosie<3",id:"581573474296791211"}],O={name:ce,id:se,bundle:le,version:ue,description:fe,authors:de};const{utilities:G,metro:$,components:me,assets:{getIDByName:E},storage:{useSettingsStore:H,get:pe,set:Ke},patcher:{createPatcher:ye}}=window.unbound,he=window.ReactNative,i=window.React,{ScrollView:ve,TouchableOpacity:V,View:y,LayoutAnimation:{create:I,configureNext:j},FlatList:qe}=he,p=function(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return pe(O.name,e,r)},be=function(e,r,o){return Object.values(r).map(function(n){let{patches:t}=n;Object.values(t).forEach(function(s){let{key:a}=s;return e.set(`${a}.enabled`,o)})})};function u(e,r,o){return r in e?Object.defineProperty(e,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[r]=o,e}function T(e,r){return T=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n},T(e,r)}function z(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&T(e,r)}function x(e){return x=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},x(e)}function ge(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Ee(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function we(e){return e&&typeof Symbol<"u"&&e.constructor===Symbol?"symbol":typeof e}function _e(e,r){return r&&(we(r)==="object"||typeof r=="function")?r:Ee(e)}function C(e){var r=ge();return function(){var n=x(e),t;if(r){var s=x(this).constructor;t=Reflect.construct(n,arguments,s)}else t=n.apply(this,arguments);return _e(this,t)}}let w=function(){function e(){R(this,e)}return S(e,null,[{key:"patch",value:function(r){}},{key:"render",value:function(r){return i.createElement(i.Fragment,null)}}]),e}();u(w,"key",void 0),u(w,"title",void 0),u(w,"subtitle",void 0),u(w,"icon",void 0);const{findByProps:Y,findStore:ke}=$,[J,F,K]=Y({params:["canUseEmojisEverywhere"],lazy:!0},{params:["openLazy","hideActionSheet"],lazy:!0},{params:["sendMessage","receiveMessage"],lazy:!0},{bulk:!0}),Pe=ke("SelectedGuild"),q=Y("uploadLocalFiles",{lazy:!0});let k=function(e){z(o,e);var r=C(o);function o(){return R(this,o),r.apply(this,arguments)}return S(o,null,[{key:"parseEmojis",value:function(n){!n||!p(`${this.key}.enabled`)||(n.validNonShortcutEmojis.forEach(function(t,s){var a;(t.guildId!==Pe.getGuildId()||t.animated)&&(n.content=n.content.replace(`<${t.animated?"a":""}:${(a=t.originalName)!=null?a:t.name}:${t.id}>`,t.url.replace("webp","png").replace(/size=\d+/,"size=48")),delete n.validNonShortcutEmojis[s])}),n.validNonShortcutEmojis=n.validNonShortcutEmojis.filter(function(t){return t}))}},{key:"patch",value:function(n){var t=this;console.log({Permission:J,LazyActionSheet:F,Messages:K,Uploading:q});const s=function(a){return n.instead(J,a,function(c,l,f){return p(`${t.key}.enabled`)?!t.isReacting:f.apply(c,l)})};s("canUseEmojisEverywhere"),s("canUseAnimatedEmojis"),n.before(F,"openLazy",function(a,c){let[,l,{pickerIntention:f}]=c;if(p(`${t.key}.enabled`))switch(l){case"EmojiPickerActionSheet":if(f!==0)break;case"MessageLongPressActionSheet":t.isReacting=!0}}),n.after(F,"hideActionSheet",function(){return p(`${t.key}.enabled`)&&(t.isReacting=!1)}),n.before(K,"sendMessage",function(a,c){let[,l]=c;return t.parseEmojis(l)}),n.before(q,"uploadLocalFiles",function(a,c){let[{parsedMessage:l}]=c;return t.parseEmojis(l)})}}]),o}(w);u(k,"key","freeEmojis"),u(k,"title","Free Emojis"),u(k,"subtitle","Allows you to send any custom or animated emoji as an image/gif link."),u(k,"icon","ic_emoji_24px"),u(k,"isReacting",!1);const{findByName:Re,findStore:Se,common:{Clipboard:$e},components:{Redesign:Oe}}=$,{findInReactTree:je}=G,xe=Se("UserProfile"),Ae=Re("EditProfileTheme",{interop:!1}),Be=function(e){let{getText:r}=e,o;const[n,t]=i.useState(!1);return i.createElement(Oe.IconButton,{icon:E("ic_message_copy"),variant:"primary",size:"md",loading:n,onPress:function(){clearTimeout(o),t(function(s){return!s}),o=setTimeout(function(){return t(function(s){return!s})},400),$e.setString(r())}})};let g=function(e){z(o,e);var r=C(o);function o(){return R(this,o),r.apply(this,arguments)}return S(o,null,[{key:"is3y3",value:function(n){return Boolean([...n].some(function(t){return 917504<t.codePointAt(0)&&t.codePointAt(0)<917631}))}},{key:"encode",value:function(n){return[...n].map(function(t){return 0<t.codePointAt(0)&&t.codePointAt(0)<127?`${String.fromCodePoint(t.codePointAt(0)+917504)}`:t}).join("")}},{key:"decode",value:function(n){return[...n].map(function(t){return 917504<t.codePointAt(0)&&t.codePointAt(0)<917631?String.fromCodePoint(t.codePointAt(0)-917504):t}).join("")}},{key:"patch",value:function(n){var t=this;n.after(xe,"getUserProfile",function(s,a,c){if(!c||!t.is3y3(c.bio)||!p(`${t.key}.enabled`))return;const l=t.decode(c.bio),f=l.match(t.colorExpression);!f||(f.shift(),c.themeColors=f.map(function(m){return parseInt("0x"+m.slice(1))}),c.premiumType=2,c.bio=l.replace(t.replacingExpression,""))}),n.after(Ae,"default",function(s,a,c){var l;if(!p(`${t.key}.enabled`))return;const f=je(c,function(d){return d?.children.find(function(h){var v;return((v=h?.type)==null?void 0:v.name)==="ColorSwatch"})}),m=function(d){var h;return(h=f?.children)==null?void 0:h.find(function(v){var B,ae;return((B=v?.type)==null?void 0:B.name)==="ColorSwatch"&&((ae=v?.props)==null?void 0:ae.description)===d})},_=function(d){return d.props.color.toString(16).padStart(6,"0")};(l=f.children)==null||l.unshift(i.createElement(y,{style:{marginTop:16,marginRight:8}},i.createElement(Be,{getText:function(){const d=m("Primary"),h=m("Accent");return t.encode(`[#${_(d)},#${_(h)}]`)}})))})}}]),o}(w);u(g,"key","profileThemes"),u(g,"title","Profile Themes"),u(g,"subtitle",'Uses 3y3 encoded text in bios to colorize profiles. Copy your own from the "Profile Theme" section.'),u(g,"icon","ic_custom_color"),u(g,"colorExpression",/\[(\#[0-9a-fA-F]{6})\s*,\s*(\#[0-9a-fA-F]{6})\]/),u(g,"replacingExpression",new RegExp(g.colorExpression,"g"));var Ie=Object.defineProperty,A=Object.getOwnPropertySymbols,Q=Object.prototype.hasOwnProperty,W=Object.prototype.propertyIsEnumerable,X=(e,r,o)=>r in e?Ie(e,r,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[r]=o,Te=(e,r)=>{for(var o in r||(r={}))Q.call(r,o)&&X(e,o,r[o]);if(A)for(var o of A(r))W.call(r,o)&&X(e,o,r[o]);return e},ze=(e,r)=>{var o={};for(var n in e)Q.call(e,n)&&r.indexOf(n)<0&&(o[n]=e[n]);if(e!=null&&A)for(var n of A(e))r.indexOf(n)<0&&W.call(e,n)&&(o[n]=e[n]);return o},Z;const{common:{StyleSheet:Ce,Theme:N},components:{Forms:U}}=$,b=function(e){return Ce.createThemedStyleSheet(e)}({navigation:{paddingHorizontal:16,paddingBottom:16,backgroundColor:N.unsafe_rawColors.PRIMARY_800},shadow:{shadowColor:"#000",shadowOffset:{width:1,height:4},shadowOpacity:.15,shadowRadius:4.65,elevation:8},section:{marginHorizontal:16,shadowColor:"#000",shadowOffset:{width:1,height:4},shadowOpacity:.15,shadowRadius:4.65,elevation:8,height:"100%"},sectionIcon:{width:16,height:16,marginHorizontal:4},renderable:{backgroundColor:(Z=N.colors.CARD_PRIMARY_BG)!=null?Z:N.colors.BACKGROUND_PRIMARY},space:{marginBottom:50}}),Fe=[{title:"Disable",value:!1},{title:"Enable",value:!0}],Ne=function(e){let r=e,{title:o,icon:n,patches:t,children:s,style:a}=r,c=ze(r,["title","icon","patches","children","style"]);const[l,f]=i.useState(p(`${o}.hidden`,!1)),m=Object.keys(t).every(function(d){return!p(`${d}.enabled`)}),_=H(O.name);return i.useEffect(function(){_.set(`${o}.hidden`,l)},[l]),i.createElement(U.FormSection,Te({title:o,style:[a,{opacity:m?.5:1}],icon:i.createElement(y,{style:{flexDirection:"row"}},n,i.createElement(V,{onPress:function(){Object.keys(t).forEach(function(d){return _.set(`${d}.enabled`,m)}),j(I(300,"keyboard"))}},i.createElement(U.FormRow.Icon,{source:E(m?"Small":"Check"),style:b.sectionIcon})),i.createElement(V,{onPress:function(){f(function(d){return!d}),j({duration:300,create:{type:"keyboard",property:"opacity"},update:{type:"easeInEaseOut"},delete:{type:"easeInEaseOut",property:"opacity"}})}},i.createElement(U.FormRow.Icon,{source:E(`ic_arrow${l?"":"_down"}`),style:b.sectionIcon})))},c),!l&&s)},ee={serverInvite:"https://discord.gg/TeRQEPb",bannersSource:"https://raw.githubusercontent.com/Discord-Custom-Covers/usrbg/master/dist/usrbg.json"},{findByProps:te,components:{Redesign:ne}}=$,Ue=te("default","getUserBannerURL",{lazy:!0}),Le=te("openURL","openDeeplink",{lazy:!0});let P=function(e){z(o,e);var r=C(o);function o(){return R(this,o),r.apply(this,arguments)}return S(o,null,[{key:"fetchBanners",value:function(){var n=this;return new Promise(function(t,s){fetch(ee.bannersSource).then(function(a){return a.ok||s("Failed to fetch badges."),a.json()}).then(function(a){n.banners=a,t(1)}).catch(console.error)})}},{key:"getBanner",value:function(n){var t;const s=(t=this.banners)==null?void 0:t.find(function(a){return a.uid===n.id});return n?.banner===void 0&&s?s.img:n.banner}},{key:"patch",value:function(n){var t=this;n.after(Ue,"getUserBannerURL",function(s,a){let[c]=a;return p(`${t.key}.enabled`)?t.banners?t.getBanner(c):(t.fetchBanners(),c.banner):c.banner})}},{key:"render",value:function(n){let{disabled:t}=n;const[s,a]=i.useState(!1);return i.createElement(y,{style:{flexDirection:"row",marginHorizontal:16,marginBottom:16}},i.createElement(ne.Button,{text:"Join Server",onPress:function(){return Le.openDeeplink(ee.serverInvite)},style:{flex:.5,marginRight:10},variant:"primary",size:"md",icon:E("icon-invite"),iconPosition:"start",disabled:t}),i.createElement(ne.Button,{text:"Reload Banners",onPress:function(){a(!0),o.fetchBanners().then(function(){return a(!1)}).catch(function(c){return console.error(c)})},style:{flex:.5},variant:"primary-alt",size:"md",icon:E("ic_message_retry"),iconPosition:"start",disabled:t,loading:s}))}}]),o}(w);u(P,"key","customBanner"),u(P,"title","Custom Banner"),u(P,"subtitle","Uses the UserBG API to display custom banners. Request your own at the black-box server."),u(P,"icon","ic_profile_24px"),u(P,"banners",void 0);const L={client:{icon:"img_nitro_star",patches:{freeEmojis:k}},profile:{icon:"ic_profile_24px",patches:{profileThemes:g,customBanner:P}}},De=function(e){return Object.values(L).forEach(function(r){Object.values(r.patches).forEach(function(o){var n;try{o.patch(e)}catch(t){console.error(`Patch '${o.title}' (${o.key}) errored with '${(n=t.message)!=null?n:t}'.`)}})})},{components:{Forms:Me,Redesign:{TableSwitchRow:Ge,TableRowIcon:He},Button:D}}=$,{AdvancedSearch:re}=me,oe={type:"FAKE_NITRO"};function Ve(){const e=H(O.name),[r,o]=re.useAdvancedSearch(oe);return i.createElement(y,null,i.createElement(y,{style:b.navigation},i.createElement(y,{style:b.shadow},i.createElement(re,{searchContext:oe,controls:o})),i.createElement(y,{style:b.shadow},i.createElement(y,{style:{flexDirection:"row"}},Fe.map(function(n,t,s){let{title:a,value:c}=n,{length:l}=s;return i.createElement(D,{color:D.Colors.BRAND,text:a,size:D.Sizes.MEDIUM,onPress:function(){be(e,L,c),j(I(300,"keyboard"))},style:{marginTop:16,borderRadius:12,marginHorizontal:4,flex:1/l}})})))),i.createElement(ve,{style:b.section},i.createElement(y,{style:{marginTop:-20}}),Object.entries(L).map(function(n){let[t,{icon:s,patches:a}]=n;return i.createElement(Ne,{key:t,title:G.capitalize(t),icon:i.createElement(Me.FormRow.Icon,{style:b.sectionIcon,source:E(s)}),inset:!0,sectionBodyStyle:{borderRadius:24},uppercaseTitle:!1,patches:a},Object.values(a).filter(function(c){let{title:l,subtitle:f}=c;return[l,f].some(function(m){return m.toLowerCase().includes(r.toLowerCase())})}).map(function(c,l,f){let{key:m,title:_,subtitle:d,icon:h,render:v}=c;return i.createElement(i.Fragment,null,i.createElement(Ge,{label:_,subLabel:d,icon:i.createElement(He,{source:typeof h=="string"?E(h):h}),value:p(`${m}.enabled`),onValueChange:function(B){e.set(`${m}.enabled`,JSON.parse(B)),j(I(300,"keyboard"))},disabled:!p(`${m}.enabled`),start:l===0,end:l===f.length-1}),v&&i.createElement(y,{style:b.renderable},i.createElement(v,{disabled:!p(`${m}.enabled`)})))}))})),i.createElement(y,{style:b.space}))}const ie=ye(O.name);let Ye=function(){function e(){R(this,e)}return S(e,[{key:"start",value:function(){De(ie)}},{key:"stop",value:function(){ie.unpatchAll()}},{key:"settings",value:function(){return i.createElement(Ve,null)}}]),e}();var Je=new Ye;return Je})();
