(function(){function w(r,o){if(!(r instanceof o))throw new TypeError("Cannot call a class as a function")}function W(r,o){for(var e=0;e<o.length;e++){var n=o[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}function I(r,o,e){return o&&W(r.prototype,o),e&&W(r,e),r}var ge="FakeNitro",ve="rosie.fakenitro",be="http://rosies-macbook-air.local:5496/bundle.js",_e="1.0.6",Ee="Adds an authentic pseudo-nitro experience to the client, ranging from free emojis to image banners.",ke=[{name:"Rosie<3",id:"588262373488590878"}],x={name:ge,id:ve,bundle:be,version:_e,description:Ee,authors:ke};const{utilities:X,metro:E,components:we,assets:{getIDByName:R},storage:{useSettingsStore:Z,get:Ie,set:yt,on:Se},patcher:{createPatcher:Pe}}=window.unbound;E.stores.Users;const $e=window.ReactNative,f=window.React,[ee,Oe,H]=E.findByProps({params:["canUseEmojisEverywhere"],lazy:!0},{params:["uploadLocalFiles"],lazy:!0},{params:["sendMessage","receiveMessage"],lazy:!0},{bulk:!0}),{ScrollView:Re,TouchableOpacity:te,View:b,LayoutAnimation:{create:J,configureNext:z},FlatList:ht}=$e,g=function(r){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return Ie(x.name,r,o)},je=function(r,o,e){return Object.values(o).map(function(n){let{patches:t}=n;Object.values(t).forEach(function(c){let{key:i}=c;return r.set(`${i}.enabled`,e)})})};function s(r,o,e){return o in r?Object.defineProperty(r,o,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[o]=e,r}function V(r,o){return V=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n},V(r,o)}function P(r,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(o&&o.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),o&&V(r,o)}function F(r){return F=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},F(r)}function Ae(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Te(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function xe(r){return r&&typeof Symbol<"u"&&r.constructor===Symbol?"symbol":typeof r}function Ne(r,o){return o&&(xe(o)==="object"||typeof o=="function")?o:Te(r)}function $(r){var o=Ae();return function(){var n=F(r),t;if(o){var c=F(this).constructor;t=Reflect.construct(n,arguments,c)}else t=n.apply(this,arguments);return Ne(this,t)}}let _=function(){function r(){w(this,r)}return I(r,null,[{key:"patch",value:function(o){}},{key:"render",value:function(o){return f.createElement(f.Fragment,null)}}]),r}();s(_,"key",void 0),s(_,"title",void 0),s(_,"subtitle",void 0),s(_,"icon",void 0);const{findStore:Be}=E,Ce=Be("SelectedGuild");let N=function(r){P(e,r);var o=$(e);function e(){return w(this,e),o.apply(this,arguments)}return I(e,null,[{key:"parseEmojis",value:function(n){!n||!n.validNonShortcutEmojis||!g(`${this.key}.enabled`)||(n.validNonShortcutEmojis.forEach(function(t,c){var i,a;(t.guildId!==Ce.getGuildId()||t.animated)&&(n.content=n.content.replace(`<${t.animated?"a":""}:${(i=t.originalName)!=null?i:t.name}:${t.id}>`,t.url.replace("webp","png").replace(/size=\d+/,`size=48&quality=lossless&name=${(a=t.originalName)!=null?a:t.name}`)),delete n.validNonShortcutEmojis[c])}),n.validNonShortcutEmojis=n.validNonShortcutEmojis.filter(function(t){return t}))}},{key:"patch",value:function(n){var t=this;n.before(H,"sendMessage",function(c,i){let[,a]=i;return t.parseEmojis(a)}),n.before(Oe,"uploadLocalFiles",function(c,i){let[{parsedMessage:a}]=i;return t.parseEmojis(a)})}}]),e}(_);s(N,"key","freeEmojis"),s(N,"title","Free Emojis"),s(N,"subtitle","Allows you to send any custom or animated emoji as an image/gif link."),s(N,"icon","ic_emoji_24px");const{findStore:Ue,findByName:ze}=E,{getCustomEmojiById:Fe}=Ue("Emoji"),ne=ze("RowManager");let j=function(r){P(e,r);var o=$(e);function e(){return w(this,e),o.apply(this,arguments)}return I(e,null,[{key:"patch",value:function(n){var t=this;n.before(ne.prototype,"generate",function(c,i){var a,l,d;let[u]=i;if(u.rowType!==1||!((a=u.message)!=null&&a.content)||!g(`${t.key}.enabled`))return;let y=u.message.content;const m=t.emojiLinkRegex;if(typeof y!="string"||!y.match(m))return;let p=y.slice((l=y.match(m))==null?void 0:l.index).trim().split(`
`);if(!p.every(function(v){return v.match(m)}))return;y=y.slice(0,(d=y.match(m))==null?void 0:d.index),y=y.replace(/  /g,function(){return` ${p.shift()} `}).trim(),p.length&&(y+=` ${p.join(" ")}`);const h=u.message.embeds.filter(function(v){return!(v.type==="image"&&v.url.match(m))});u.message.content=y,u.message.embeds=h,u.__fakenitro=!0}),n.after(ne.prototype,"generate",function(c,i,a){var l;let[d]=i;if(d.rowType!==1||!d.__fakenitro||!Array.isArray(a.message.content)||!g(`${t.key}.enabled`))return;const{content:u}=a.message;if(!Array.isArray(u))return;const y=t.emojiLinkRegex,m=u.every(function(p){return!!(p.type==="link"&&p.target.match(y)||p.type==="text"&&p.content===" ")});for(let p=0;p<u.length;p++){const h=u[p];if(h.type!=="link")continue;const v=h.target.match(y);if(!v)continue;const k=`${v[0]}?size=4096`,he=Fe(v[1]);u[p]={type:"customEmoji",id:v[1],alt:(l=he?.name)!=null?l:"<invalid>",src:k,frozenSrc:k.replace("gif","webp"),jumboable:m?!0:void 0}}})}}]),e}(_);s(j,"key","realEmojis"),s(j,"title","Real Emojis"),s(j,"subtitle","Formats fake nitro emoji links into real emojis by parsing the links when rendering the chat."),s(j,"icon","ic_double_down_arrow"),s(j,"emojiLinkRegex",/https:\/\/cdn.discordapp.com\/emojis\/(\d+)\.\w+/);const{findStore:re}=E,Me=re("Stickers"),Le=re("Channel");let B=function(r){P(e,r);var o=$(e);function e(){return w(this,e),o.apply(this,arguments)}return I(e,null,[{key:"getStickerUrl",value:function(n){return`https://media.discordapp.net/stickers/${n}.png?size=160&quality=lossless`}},{key:"canUseSticker",value:function(n,t){return!n.guild_id||n.guild_id===Le.getChannel(t).guild_id}},{key:"patch",value:function(n){var t=this;n.instead(H,"sendStickers",function(c,i,a){var l;if(!g(`${t.key}.enabled`))return a.apply(c,i);const[d,u,y,m]=i,p=u.map(function(k){return Me.getStickerById(k)}),h=(l=p?.filter)==null?void 0:l.call(p,function(k){return!t.canUseSticker(k,d)});if(h.length<1)return a.apply(c,i);const v=h.map(function(k){return t.getStickerUrl(k.id)}).join(`
`);H.sendMessage(d,{content:v},null,m)})}}]),e}(_);s(B,"key","freeStickers"),s(B,"title","Free Stickers"),s(B,"subtitle","Turns invalid stickers into images when sent. Note that animated stickers won't animate :c"),s(B,"icon","img_nitro_sticker");const{findByName:De,findStore:Ge,common:{Clipboard:He},components:{Redesign:Je}}=E,{findInReactTree:Ve}=X,qe=Ge("UserProfile"),Ye=De("EditProfileTheme",{interop:!1}),Ke=function(r){let{getText:o}=r,e;const[n,t]=f.useState(!1);return f.createElement(Je.IconButton,{icon:R("ic_message_copy"),variant:"primary",size:"md",loading:n,onPress:function(){clearTimeout(e),t(function(c){return!c}),e=setTimeout(function(){return t(function(c){return!c})},400),He.setString(o())}})};let O=function(r){P(e,r);var o=$(e);function e(){return w(this,e),o.apply(this,arguments)}return I(e,null,[{key:"is3y3",value:function(n){return Boolean([...n].some(function(t){return 917504<t.codePointAt(0)&&t.codePointAt(0)<917631}))}},{key:"encode",value:function(n){return[...n].map(function(t){return 0<t.codePointAt(0)&&t.codePointAt(0)<127?`${String.fromCodePoint(t.codePointAt(0)+917504)}`:t}).join("")}},{key:"decode",value:function(n){return[...n].map(function(t){return 917504<t.codePointAt(0)&&t.codePointAt(0)<917631?String.fromCodePoint(t.codePointAt(0)-917504):t}).join("")}},{key:"patch",value:function(n){var t=this;n.after(qe,"getUserProfile",function(c,i,a){if(!a||!t.is3y3(a.bio)||!g(`${t.key}.enabled`))return;const l=t.decode(a.bio),d=l.match(t.colorExpression);!d||(d.shift(),a.themeColors=d.map(function(u){return parseInt("0x"+u.slice(1))}),a.premiumType=2,a.bio=l.replace(t.replacingExpression,""))}),n.after(Ye,"default",function(c,i,a){var l;if(!g(`${t.key}.enabled`))return;const d=Ve(a,function(m){return m?.children.find(function(p){var h;return((h=p?.type)==null?void 0:h.name)==="ColorSwatch"})}),u=function(m){var p;return(p=d?.children)==null?void 0:p.find(function(h){var v,k;return((v=h?.type)==null?void 0:v.name)==="ColorSwatch"&&((k=h?.props)==null?void 0:k.description)===m})},y=function(m){return m.props.color.toString(16).padStart(6,"0")};(l=d.children)==null||l.unshift(f.createElement(b,{style:{marginTop:5,marginRight:8}},f.createElement(Ke,{getText:function(){const m=u("Primary"),p=u("Accent");return t.encode(`[#${y(m)},#${y(p)}]`)}})))})}}]),e}(_);s(O,"key","profileThemes"),s(O,"title","Profile Themes"),s(O,"subtitle","Uses 3y3 text to colorize profiles. Copy your own from the 'Profile Theme' section."),s(O,"icon","ic_custom_color"),s(O,"colorExpression",/\[(\#[0-9a-fA-F]{6})\s*,\s*(\#[0-9a-fA-F]{6})\]/),s(O,"replacingExpression",new RegExp(O.colorExpression,"g"));var Qe=Object.defineProperty,M=Object.getOwnPropertySymbols,oe=Object.prototype.hasOwnProperty,ie=Object.prototype.propertyIsEnumerable,ae=(r,o,e)=>o in r?Qe(r,o,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[o]=e,We=(r,o)=>{for(var e in o||(o={}))oe.call(o,e)&&ae(r,e,o[e]);if(M)for(var e of M(o))ie.call(o,e)&&ae(r,e,o[e]);return r},Xe=(r,o)=>{var e={};for(var n in r)oe.call(r,n)&&o.indexOf(n)<0&&(e[n]=r[n]);if(r!=null&&M)for(var n of M(r))o.indexOf(n)<0&&ie.call(r,n)&&(e[n]=r[n]);return e},ce;const{common:{StyleSheet:Ze,Theme:q},components:{Forms:Y}}=E,S=function(r){return Ze.createThemedStyleSheet(r)}({navigation:{paddingHorizontal:16,paddingBottom:16,backgroundColor:q.unsafe_rawColors.PRIMARY_800},shadow:{shadowColor:"#000",shadowOffset:{width:1,height:4},shadowOpacity:.15,shadowRadius:4.65,elevation:8},section:{marginTop:-20,marginHorizontal:16,shadowColor:"#000",shadowOffset:{width:1,height:4},shadowOpacity:.15,shadowRadius:4.65,elevation:8,height:"100%"},sectionIcon:{width:16,height:16,marginHorizontal:4},renderable:{backgroundColor:(ce=q.colors.CARD_PRIMARY_BG)!=null?ce:q.colors.BACKGROUND_PRIMARY},space:{marginBottom:50}}),et=[{title:"Disable",value:!1},{title:"Enable",value:!0}],tt=function(r){let o=r,{title:e,icon:n,patches:t,children:c,style:i}=o,a=Xe(o,["title","icon","patches","children","style"]);const[l,d]=f.useState(g(`${e}.hidden`,!1)),u=Object.keys(t).every(function(m){return!g(`${m}.enabled`)}),y=Z(x.name);return f.useEffect(function(){y.set(`${e}.hidden`,l)},[l]),f.createElement(Y.FormSection,We({title:e,style:[i,{opacity:u?.5:1}],icon:f.createElement(b,{style:{flexDirection:"row"}},n,f.createElement(te,{onPress:function(){Object.keys(t).forEach(function(m){return y.set(`${m}.enabled`,u)}),z(J(300,"keyboard"))}},f.createElement(Y.FormRow.Icon,{source:R(u?"Small":"Check"),style:S.sectionIcon})),f.createElement(te,{onPress:function(){d(function(m){return!m}),z({duration:300,create:{type:"keyboard",property:"opacity"},update:{type:"easeInEaseOut"},delete:{type:"easeInEaseOut",property:"opacity"}})}},f.createElement(Y.FormRow.Icon,{source:R(`ic_arrow${l?"":"_down"}`),style:S.sectionIcon})))},a),!l&&c)},se={serverInvite:"https://discord.gg/TeRQEPb",bannersSource:"https://raw.githubusercontent.com/Discord-Custom-Covers/usrbg/master/dist/usrbg.json"},{findByProps:le,components:{Redesign:ue}}=E,nt=le("default","getUserBannerURL",{lazy:!0}),rt=le("openURL","openDeeplink",{lazy:!0});let A=function(r){P(e,r);var o=$(e);function e(){return w(this,e),o.apply(this,arguments)}return I(e,null,[{key:"fetchBanners",value:function(){var n=this;return new Promise(function(t,c){fetch(se.bannersSource).then(function(i){return i.ok||c("Failed to fetch badges."),i.json()}).then(function(i){n.banners=i,t(1)}).catch(console.error)})}},{key:"getBanner",value:function(n){var t;const c=(t=this.banners)==null?void 0:t.find(function(i){return i.uid===n.id});return!(n!=null&&n.banner)&&c?c.img:n.banner}},{key:"patch",value:function(n){var t=this;n.after(nt,"getUserBannerURL",function(c,i){let[a]=i;return g(`${t.key}.enabled`)?t.banners?t.getBanner(a):(t.fetchBanners(),a.banner):a.banner})}},{key:"render",value:function(n){let{disabled:t}=n;const[c,i]=f.useState(!1);return f.createElement(b,{style:{flexDirection:"row",marginHorizontal:16,marginBottom:16}},f.createElement(ue.Button,{text:"Join Server",onPress:function(){return rt.openDeeplink(se.serverInvite)},style:{flex:.5,marginRight:10},variant:"primary",size:"md",icon:R("icon-invite"),iconPosition:"start",disabled:t}),f.createElement(ue.Button,{text:"Reload Banners",onPress:function(){i(!0),e.fetchBanners().then(function(){return i(!1)}).catch(function(a){return console.error(a)})},style:{flex:.5},variant:"primary-alt",size:"md",icon:R("ic_message_retry"),iconPosition:"start",disabled:t,loading:c}))}}]),e}(_);s(A,"key","customBanner"),s(A,"title","Custom Banner"),s(A,"subtitle","Displays custom banners with the UserBG API. Request your own at the server below."),s(A,"icon","ic_profile_24px"),s(A,"banners",void 0);const{findByName:fe,findByProps:de,common:{i18n:{Messages:L}}}=E,ot=de("ButtonColors",{lazy:!0}),it=de("TextStyleSheet",{lazy:!0}),at=fe("SearchableSettingsList",{lazy:!0}),ct=fe("UpsellCard",{interop:!1,lazy:!0});let T=function(r){P(e,r);var o=$(e);function e(){return w(this,e),o.apply(this,arguments)}return I(e,null,[{key:"patch",value:function(n){var t=this;n.instead(ot,"default",function(c,i,a){if(!(i[0].text===L.EMOJI_POPOUT_PREMIUM_CTA&&g(`${t.key}.enabled`)))return a.apply(c,i)}),n.instead(b,"render",function(c,i,a){var l;if(!([L.PREMIUM,"Nitro"].includes((l=i[0])==null?void 0:l.accessibilityLabel)&&g(`${t.key}.enabled`)))return a.apply(c,i)}),n.instead(ct,"default",function(c,i,a){if(!g(`${t.key}.enabled`))return a.apply(c,i)}),n.before(it.Text,"render",function(c,i){!g(`${t.key}.enabled`)||typeof i[0].children!="string"||t.props.forEach(function(a){var l,d,u;const y=L[`EMOJI_POPOUT_${a}`],m=L[`EMOJI_POPOUT_PREMIUM_${a}`];!((l=i[0].children)!=null&&l.includes(y))||(i[0].children=(u=(d=i[0].children)==null?void 0:d.replace)==null?void 0:u.call(d,y,m))})}),n.before(at.SearchableSettingsList,"type",function(c,i){let[{sections:a}]=i;const l=a.find(function(d){return d.settings.includes("PREMIUM")});l&&(l.settings=l.settings.filter(function(d){return d!=="PREMIUM"}))})}}]),e}(_);s(T,"key","hideUpsells"),s(T,"title","Hide Upsells"),s(T,"subtitle","Hide all 'Get Nitro' upsells throughout Discord (doesn't include boosting upsells)"),s(T,"icon","img_nitro_boosted"),s(T,"props",["CURRENT_GUILD_DESCRIPTION","JOINED_GUILD_DESCRIPTION","UNJOINED_DISCOVERABLE_GUILD_DESCRIPTION"]);let C=function(r){P(e,r);var o=$(e);function e(){return w(this,e),o.apply(this,arguments)}return I(e,null,[{key:"patch",value:function(n){var t=this;Object.keys(ee).forEach(function(c){c.includes("can")&&n.instead(ee,c,function(i,a,l){return g(`${t.key}.enabled`)?!0:l.apply(i,a)})})}}]),e}(_);s(C,"key","pseudoPatches"),s(C,"title","Pseudo Patches"),s(C,"subtitle","Patches several 'can' functions. Must be on to use most of the features in this plugin."),s(C,"icon","ic_message_retry");const[D,G]=E.findByProps({params:["OFFICIAL_ALTERNATE_ICONS"],lazy:!0},{params:["FreemiumAppIconIds"],lazy:!0},{bulk:!0});let U=function(r){P(e,r);var o=$(e);function e(){return w(this,e),o.apply(this,arguments)}return I(e,null,[{key:"patch",value:function(n){var t=this;const c=G.FreemiumAppIconIds;Se("changed",function(i,a,l){if(i===x.name&&a===`${t.key}.enabled`)if(l){const d=D.OFFICIAL_ALTERNATE_ICONS();d.forEach(function(u){return u.isPremium=!1}),D.ICONS.forEach(function(u){return u.isPremium=!1}),n.instead("OFFICIAL_ALTERNATE_ICONS",D,function(){return d}),G.FreemiumAppIconIds=G.MasterAppIconIds}else D.ICONS.forEach(function(d){return d.isPremium=!0}),G.FreemiumAppIconIds=c,n.unpatchAll()})}}]),e}(_);s(U,"key","appIcons"),s(U,"title","App Icons"),s(U,"subtitle","Allows you to access all of the premium and cute new Discord App Icons without nitro."),s(U,"icon","Discord");const K={client:{icon:"ic_nitro_rep_24px",patches:{hideUpsells:T,pseudoPatches:C,appIcons:U}},chat:{icon:"img_nitro_star",patches:{freeEmojis:N,realEmojis:j,freeStickers:B}},profile:{icon:"ic_profile_24px",patches:{profileThemes:O,customBanner:A}}},st=function(r){return Object.values(K).forEach(function(o){Object.values(o.patches).forEach(function(e){var n;try{e.patch(r)}catch(t){console.error(`Patch '${e.title}' (${e.key}) errored with '${(n=t.message)!=null?n:t}'.`)}})})},{components:{Forms:lt,Redesign:{TableSwitchRow:ut,TableRowIcon:ft},Button:Q}}=E,{AdvancedSearch:pe}=we,me={type:"FAKE_NITRO"};function dt(){const r=Z(x.name),[o,e]=pe.useAdvancedSearch(me);return f.createElement(Re,null,f.createElement(b,{style:S.navigation},f.createElement(b,{style:S.shadow},f.createElement(pe,{searchContext:me,controls:e})),f.createElement(b,{style:S.shadow},f.createElement(b,{style:{flexDirection:"row"}},et.map(function(n,t,c){let{title:i,value:a}=n,{length:l}=c;return f.createElement(Q,{color:Q.Colors.BRAND,text:i,size:Q.Sizes.MEDIUM,onPress:function(){je(r,K,a),z(J(300,"keyboard"))},style:{marginTop:16,borderRadius:12,marginHorizontal:4,flex:1/l}})})))),f.createElement(b,{style:S.section},Object.entries(K).map(function(n){let[t,{icon:c,patches:i}]=n;return f.createElement(tt,{key:t,title:X.capitalize(t),icon:f.createElement(lt.FormRow.Icon,{style:S.sectionIcon,source:R(c)}),inset:!0,sectionBodyStyle:{borderRadius:24},uppercaseTitle:!1,patches:i},Object.values(i).filter(function(a){let{title:l,subtitle:d}=a;return[l,d].some(function(u){return u.toLowerCase().includes(o.toLowerCase())})}).map(function(a,l,d){let{key:u,title:y,subtitle:m,icon:p,render:h}=a;return f.createElement(f.Fragment,null,f.createElement(b,{style:g(`${u}.enabled`)?{}:{opacity:.5}},f.createElement(ut,{label:y,subLabel:m,icon:f.createElement(ft,{source:typeof p=="string"?R(p):p}),value:g(`${u}.enabled`),onValueChange:function(v){r.set(`${u}.enabled`,JSON.parse(v)),z(J(300,"keyboard"))},start:l===0,end:l===d.length-1})),h&&f.createElement(b,{style:S.renderable},f.createElement(h,{disabled:!g(`${u}.enabled`)})))}))})),f.createElement(b,{style:S.space}))}const ye=Pe(x.name);let pt=function(){function r(){w(this,r)}return I(r,[{key:"start",value:function(){st(ye)}},{key:"stop",value:function(){ye.unpatchAll()}},{key:"settings",value:function(){return f.createElement(dt,null)}}]),r}();var mt=new pt;return mt})();
