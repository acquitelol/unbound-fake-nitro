(function(){function k(r,o){if(!(r instanceof o))throw new TypeError("Cannot call a class as a function")}function K(r,o){for(var t=0;t<o.length;t++){var n=o[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}function w(r,o,t){return o&&K(r.prototype,o),t&&K(r,t),r}var me="FakeNitro",ye="rosie.fakenitro",he="http://rosies-macbook-air.local:5496/bundle.js",ge="1.0.4",ve="Adds an authentic pseudo-nitro experience to the client, ranging from free emojis to image banners.",be=[{name:"Rosie<3",id:"588262373488590878"}],N={name:me,id:ye,bundle:he,version:ge,description:ve,authors:be};const{utilities:F,metro:P,components:_e,assets:{getIDByName:R},storage:{useSettingsStore:Q,get:Ee,set:dt},patcher:{createPatcher:ke}}=window.unbound,we=window.ReactNative,f=window.React,[W,Pe,L]=P.findByProps({params:["canUseEmojisEverywhere"],lazy:!0},{params:["uploadLocalFiles"],lazy:!0},{params:["sendMessage","receiveMessage"],lazy:!0},{bulk:!0}),{ScrollView:Se,TouchableOpacity:X,View:b,LayoutAnimation:{create:G,configureNext:C},FlatList:pt}=we,g=function(r){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return Ee(N.name,r,o)},$e=function(r,o,t){return Object.values(o).map(function(n){let{patches:e}=n;Object.values(e).forEach(function(c){let{key:i}=c;return r.set(`${i}.enabled`,t)})})};function l(r,o,t){return o in r?Object.defineProperty(r,o,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[o]=t,r}function H(r,o){return H=Object.setPrototypeOf||function(n,e){return n.__proto__=e,n},H(r,o)}function O(r,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(o&&o.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),o&&H(r,o)}function z(r){return z=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},z(r)}function Re(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Oe(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function je(r){return r&&typeof Symbol<"u"&&r.constructor===Symbol?"symbol":typeof r}function Ie(r,o){return o&&(je(o)==="object"||typeof o=="function")?o:Oe(r)}function j(r){var o=Re();return function(){var n=z(r),e;if(o){var c=z(this).constructor;e=Reflect.construct(n,arguments,c)}else e=n.apply(this,arguments);return Ie(this,e)}}let _=function(){function r(){k(this,r)}return w(r,null,[{key:"patch",value:function(o){}},{key:"render",value:function(o){return f.createElement(f.Fragment,null)}}]),r}();l(_,"key",void 0),l(_,"title",void 0),l(_,"subtitle",void 0),l(_,"icon",void 0);const{findStore:xe}=P,Te=xe("SelectedGuild");let B=function(r){O(t,r);var o=j(t);function t(){return k(this,t),o.apply(this,arguments)}return w(t,null,[{key:"parseEmojis",value:function(n){!n||!n.validNonShortcutEmojis||!g(`${this.key}.enabled`)||(n.validNonShortcutEmojis.forEach(function(e,c){var i,a;(e.guildId!==Te.getGuildId()||e.animated)&&(n.content=n.content.replace(`<${e.animated?"a":""}:${(i=e.originalName)!=null?i:e.name}:${e.id}>`,e.url.replace("webp","png").replace(/size=\d+/,`size=48&quality=lossless&name=${(a=e.originalName)!=null?a:e.name}`)),delete n.validNonShortcutEmojis[c])}),n.validNonShortcutEmojis=n.validNonShortcutEmojis.filter(function(e){return e}))}},{key:"patch",value:function(n){var e=this;n.before(L,"sendMessage",function(c,i){let[,a]=i;return e.parseEmojis(a)}),n.before(Pe,"uploadLocalFiles",function(c,i){let[{parsedMessage:a}]=i;return e.parseEmojis(a)})}}]),t}(_);l(B,"key","freeEmojis"),l(B,"title","Free Emojis"),l(B,"subtitle","Allows you to send any custom or animated emoji as an image/gif link."),l(B,"icon","ic_emoji_24px");const{findStore:Be,findByName:Ue}=P,{getCustomEmojiById:Ae}=Be("Emoji"),Z=Ue("RowManager");let I=function(r){O(t,r);var o=j(t);function t(){return k(this,t),o.apply(this,arguments)}return w(t,null,[{key:"patch",value:function(n){var e=this;n.before(Z.prototype,"generate",function(c,i){var a,u,d;let[s]=i;if(s.rowType!==1||!((a=s.message)!=null&&a.content)||!g(`${e.key}.enabled`))return;let y=s.message.content;const m=e.emojiLinkRegex;if(typeof y!="string"||!y.match(m))return;let p=y.slice((u=y.match(m))==null?void 0:u.index).trim().split(`
`);if(!p.every(function(v){return v.match(m)}))return;y=y.slice(0,(d=y.match(m))==null?void 0:d.index),y=y.replace(/  /g,function(){return` ${p.shift()} `}).trim(),p.length&&(y+=` ${p.join(" ")}`);const h=s.message.embeds.filter(function(v){return!(v.type==="image"&&v.url.match(m))});s.message.content=y,s.message.embeds=h,s.__fakenitro=!0}),n.after(Z.prototype,"generate",function(c,i,a){var u;let[d]=i;if(d.rowType!==1||!d.__fakenitro||!Array.isArray(a.message.content)||!g(`${e.key}.enabled`))return;const{content:s}=a.message;if(!Array.isArray(s))return;const y=e.emojiLinkRegex,m=s.every(function(p){return!!(p.type==="link"&&p.target.match(y)||p.type==="text"&&p.content===" ")});for(let p=0;p<s.length;p++){const h=s[p];if(h.type!=="link")continue;const v=h.target.match(y);if(!v)continue;const E=`${v[0]}?size=4096`,pe=Ae(v[1]);s[p]={type:"customEmoji",id:v[1],alt:(u=pe?.name)!=null?u:"<invalid>",src:E,frozenSrc:E.replace("gif","webp"),jumboable:m?!0:void 0}}})}}]),t}(_);l(I,"key","realEmojis"),l(I,"title","Real Emojis"),l(I,"subtitle","Formats fake nitro emoji links into real emojis by parsing the links when rendering the chat."),l(I,"icon","ic_double_down_arrow"),l(I,"emojiLinkRegex",/https:\/\/cdn.discordapp.com\/emojis\/(\d+)\.\w+/);const{findStore:ee}=P,Ne=ee("Stickers"),Ce=ee("Channel");let U=function(r){O(t,r);var o=j(t);function t(){return k(this,t),o.apply(this,arguments)}return w(t,null,[{key:"getStickerUrl",value:function(n){return`https://media.discordapp.net/stickers/${n}.png?size=160&quality=lossless`}},{key:"canUseSticker",value:function(n,e){return!n.guild_id||n.guild_id===Ce.getChannel(e).guild_id}},{key:"patch",value:function(n){var e=this;n.instead(L,"sendStickers",function(c,i,a){var u;if(!g(`${e.key}.enabled`))return a.apply(c,i);const[d,s,y,m]=i,p=s.map(function(E){return Ne.getStickerById(E)}),h=(u=p?.filter)==null?void 0:u.call(p,function(E){return!e.canUseSticker(E,d)});if(h.length<1)return a.apply(c,i);const v=h.map(function(E){return e.getStickerUrl(E.id)}).join(`
`);L.sendMessage(d,{content:v},null,m)})}}]),t}(_);l(U,"key","freeStickers"),l(U,"title","Free Stickers"),l(U,"subtitle","Turns invalid stickers into images when sent. Note that animated stickers will animate :c"),l(U,"icon","img_nitro_sticker");const{findByName:ze,findStore:Me,common:{Clipboard:De},components:{Redesign:Fe}}=P,{findInReactTree:Le}=F,Ge=Me("UserProfile"),He=ze("EditProfileTheme",{interop:!1}),Je=function(r){let{getText:o}=r,t;const[n,e]=f.useState(!1);return f.createElement(Fe.IconButton,{icon:R("ic_message_copy"),variant:"primary",size:"md",loading:n,onPress:function(){clearTimeout(t),e(function(c){return!c}),t=setTimeout(function(){return e(function(c){return!c})},400),De.setString(o())}})};let $=function(r){O(t,r);var o=j(t);function t(){return k(this,t),o.apply(this,arguments)}return w(t,null,[{key:"is3y3",value:function(n){return Boolean([...n].some(function(e){return 917504<e.codePointAt(0)&&e.codePointAt(0)<917631}))}},{key:"encode",value:function(n){return[...n].map(function(e){return 0<e.codePointAt(0)&&e.codePointAt(0)<127?`${String.fromCodePoint(e.codePointAt(0)+917504)}`:e}).join("")}},{key:"decode",value:function(n){return[...n].map(function(e){return 917504<e.codePointAt(0)&&e.codePointAt(0)<917631?String.fromCodePoint(e.codePointAt(0)-917504):e}).join("")}},{key:"patch",value:function(n){var e=this;n.after(Ge,"getUserProfile",function(c,i,a){if(!a||!e.is3y3(a.bio)||!g(`${e.key}.enabled`))return;const u=e.decode(a.bio),d=u.match(e.colorExpression);!d||(d.shift(),a.themeColors=d.map(function(s){return parseInt("0x"+s.slice(1))}),a.premiumType=2,a.bio=u.replace(e.replacingExpression,""))}),n.after(He,"default",function(c,i,a){var u;if(!g(`${e.key}.enabled`))return;const d=Le(a,function(m){return m?.children.find(function(p){var h;return((h=p?.type)==null?void 0:h.name)==="ColorSwatch"})}),s=function(m){var p;return(p=d?.children)==null?void 0:p.find(function(h){var v,E;return((v=h?.type)==null?void 0:v.name)==="ColorSwatch"&&((E=h?.props)==null?void 0:E.description)===m})},y=function(m){return m.props.color.toString(16).padStart(6,"0")};(u=d.children)==null||u.unshift(f.createElement(b,{style:{marginTop:5,marginRight:8}},f.createElement(Je,{getText:function(){const m=s("Primary"),p=s("Accent");return e.encode(`[#${y(m)},#${y(p)}]`)}})))})}}]),t}(_);l($,"key","profileThemes"),l($,"title","Profile Themes"),l($,"subtitle",'Uses 3y3 text to colorize profiles. Copy your own from the "Profile Theme" section.'),l($,"icon","ic_custom_color"),l($,"colorExpression",/\[(\#[0-9a-fA-F]{6})\s*,\s*(\#[0-9a-fA-F]{6})\]/),l($,"replacingExpression",new RegExp($.colorExpression,"g"));var Ve=Object.defineProperty,M=Object.getOwnPropertySymbols,te=Object.prototype.hasOwnProperty,ne=Object.prototype.propertyIsEnumerable,re=(r,o,t)=>o in r?Ve(r,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[o]=t,qe=(r,o)=>{for(var t in o||(o={}))te.call(o,t)&&re(r,t,o[t]);if(M)for(var t of M(o))ne.call(o,t)&&re(r,t,o[t]);return r},Ye=(r,o)=>{var t={};for(var n in r)te.call(r,n)&&o.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&M)for(var n of M(r))o.indexOf(n)<0&&ne.call(r,n)&&(t[n]=r[n]);return t},oe;const{common:{StyleSheet:Ke,Theme:J},components:{Forms:V}}=P,S=function(r){return Ke.createThemedStyleSheet(r)}({navigation:{paddingHorizontal:16,paddingBottom:16,backgroundColor:J.unsafe_rawColors.PRIMARY_800},shadow:{shadowColor:"#000",shadowOffset:{width:1,height:4},shadowOpacity:.15,shadowRadius:4.65,elevation:8},section:{marginTop:-20,marginHorizontal:16,shadowColor:"#000",shadowOffset:{width:1,height:4},shadowOpacity:.15,shadowRadius:4.65,elevation:8,height:"100%"},sectionIcon:{width:16,height:16,marginHorizontal:4},renderable:{backgroundColor:(oe=J.colors.CARD_PRIMARY_BG)!=null?oe:J.colors.BACKGROUND_PRIMARY},space:{marginBottom:50}}),Qe=[{title:"Disable",value:!1},{title:"Enable",value:!0}],We=function(r){let o=r,{title:t,icon:n,patches:e,children:c,style:i}=o,a=Ye(o,["title","icon","patches","children","style"]);const[u,d]=f.useState(g(`${t}.hidden`,!1)),s=Object.keys(e).every(function(m){return!g(`${m}.enabled`)}),y=Q(N.name);return f.useEffect(function(){y.set(`${t}.hidden`,u)},[u]),f.createElement(V.FormSection,qe({title:t,style:[i,{opacity:s?.5:1}],icon:f.createElement(b,{style:{flexDirection:"row"}},n,f.createElement(X,{onPress:function(){Object.keys(e).forEach(function(m){return y.set(`${m}.enabled`,s)}),C(G(300,"keyboard"))}},f.createElement(V.FormRow.Icon,{source:R(s?"Small":"Check"),style:S.sectionIcon})),f.createElement(X,{onPress:function(){d(function(m){return!m}),C({duration:300,create:{type:"keyboard",property:"opacity"},update:{type:"easeInEaseOut"},delete:{type:"easeInEaseOut",property:"opacity"}})}},f.createElement(V.FormRow.Icon,{source:R(`ic_arrow${u?"":"_down"}`),style:S.sectionIcon})))},a),!u&&c)},ie={serverInvite:"https://discord.gg/TeRQEPb",bannersSource:"https://raw.githubusercontent.com/Discord-Custom-Covers/usrbg/master/dist/usrbg.json"},{findByProps:ae,components:{Redesign:ce}}=P,Xe=ae("default","getUserBannerURL",{lazy:!0}),Ze=ae("openURL","openDeeplink",{lazy:!0});let x=function(r){O(t,r);var o=j(t);function t(){return k(this,t),o.apply(this,arguments)}return w(t,null,[{key:"fetchBanners",value:function(){var n=this;return new Promise(function(e,c){fetch(ie.bannersSource).then(function(i){return i.ok||c("Failed to fetch badges."),i.json()}).then(function(i){n.banners=i,e(1)}).catch(console.error)})}},{key:"getBanner",value:function(n){var e;const c=(e=this.banners)==null?void 0:e.find(function(i){return i.uid===n.id});return n?.banner===void 0&&c?c.img:n.banner}},{key:"patch",value:function(n){var e=this;n.after(Xe,"getUserBannerURL",function(c,i){let[a]=i;return g(`${e.key}.enabled`)?e.banners?e.getBanner(a):(e.fetchBanners(),a.banner):a.banner})}},{key:"render",value:function(n){let{disabled:e}=n;const[c,i]=f.useState(!1);return f.createElement(b,{style:{flexDirection:"row",marginHorizontal:16,marginBottom:16}},f.createElement(ce.Button,{text:"Join Server",onPress:function(){return Ze.openDeeplink(ie.serverInvite)},style:{flex:.5,marginRight:10},variant:"primary",size:"md",icon:R("icon-invite"),iconPosition:"start",disabled:e}),f.createElement(ce.Button,{text:"Reload Banners",onPress:function(){i(!0),t.fetchBanners().then(function(){return i(!1)}).catch(function(a){return console.error(a)})},style:{flex:.5},variant:"primary-alt",size:"md",icon:R("ic_message_retry"),iconPosition:"start",disabled:e,loading:c}))}}]),t}(_);l(x,"key","customBanner"),l(x,"title","Custom Banner"),l(x,"subtitle","Displays custom banners with the UsrBG API. Request your own at the server below."),l(x,"icon","ic_profile_24px"),l(x,"banners",void 0);const{findByName:se,findByProps:le,common:{i18n:{Messages:D}}}=P,{findInReactTree:et}=F,tt=le("ButtonColors",{lazy:!0}),nt=le("TextStyleSheet",{lazy:!0}),rt=se("SettingsOverviewScreen",{interop:!1,lazy:!0}),ot=se("UpsellCard",{interop:!1,lazy:!0});let T=function(r){O(t,r);var o=j(t);function t(){return k(this,t),o.apply(this,arguments)}return w(t,null,[{key:"patch",value:function(n){var e=this;n.instead(tt,"default",function(c,i,a){if(!(i[0].text===D.EMOJI_POPOUT_PREMIUM_CTA&&g(`${e.key}.enabled`)))return a.apply(c,i)}),n.instead(b,"render",function(c,i,a){var u;if(!([D.PREMIUM,"Nitro"].includes((u=i[0])==null?void 0:u.accessibilityLabel)&&g(`${e.key}.enabled`)))return a.apply(c,i)}),n.instead(ot,"default",function(c,i,a){if(!g(`${e.key}.enabled`))return a.apply(c,i)}),n.before(nt.Text,"render",function(c,i){!g(`${e.key}.enabled`)||typeof i[0].children!="string"||e.props.forEach(function(a){var u,d,s;const y=D[`EMOJI_POPOUT_${a}`],m=D[`EMOJI_POPOUT_PREMIUM_${a}`];!((u=i[0].children)!=null&&u.includes(y))||(i[0].children=(s=(d=i[0].children)==null?void 0:d.replace)==null?void 0:s.call(d,y,m))})}),n.after(rt,"default",function(c,i,a){const{sections:u}=et(a,function(s){return s.sections}),d=u.find(function(s){return s.settings.includes("PREMIUM")});d&&(d.settings=d.settings.filter(function(s){return s!=="PREMIUM"}))})}}]),t}(_);l(T,"key","hideUpsells"),l(T,"title","Hide Upsells"),l(T,"subtitle",`Hide all "Get Nitro" upsells throughout Discord (doesn't include boosting upsells)`),l(T,"icon","img_nitro_boosted"),l(T,"props",["CURRENT_GUILD_DESCRIPTION","JOINED_GUILD_DESCRIPTION","UNJOINED_DISCOVERABLE_GUILD_DESCRIPTION"]);let A=function(r){O(t,r);var o=j(t);function t(){return k(this,t),o.apply(this,arguments)}return w(t,null,[{key:"patch",value:function(n){var e=this;Object.keys(W).forEach(function(c){c.includes("can")&&n.instead(W,c,function(i,a,u){return g(`${e.key}.enabled`)?!0:u.apply(i,a)})})}}]),t}(_);l(A,"key","pseudoPatches"),l(A,"title","Pseudo Patches"),l(A,"subtitle",'Patches several "can" functions. Must be on to use most of the features in this plugin.'),l(A,"icon","ic_message_retry");const q={client:{icon:"ic_nitro_rep_24px",patches:{hideUpsells:T,pseudoPatches:A}},chat:{icon:"img_nitro_star",patches:{freeEmojis:B,realEmojis:I,freeStickers:U}},profile:{icon:"ic_profile_24px",patches:{profileThemes:$,customBanner:x}}},it=function(r){return Object.values(q).forEach(function(o){Object.values(o.patches).forEach(function(t){var n;try{t.patch(r)}catch(e){console.error(`Patch '${t.title}' (${t.key}) errored with '${(n=e.message)!=null?n:e}'.`)}})})},{components:{Forms:at,Redesign:{TableSwitchRow:ct,TableRowIcon:st},Button:Y}}=P,{AdvancedSearch:ue}=_e,fe={type:"FAKE_NITRO"};function lt(){const r=Q(N.name),[o,t]=ue.useAdvancedSearch(fe);return f.createElement(Se,null,f.createElement(b,{style:S.navigation},f.createElement(b,{style:S.shadow},f.createElement(ue,{searchContext:fe,controls:t})),f.createElement(b,{style:S.shadow},f.createElement(b,{style:{flexDirection:"row"}},Qe.map(function(n,e,c){let{title:i,value:a}=n,{length:u}=c;return f.createElement(Y,{color:Y.Colors.BRAND,text:i,size:Y.Sizes.MEDIUM,onPress:function(){$e(r,q,a),C(G(300,"keyboard"))},style:{marginTop:16,borderRadius:12,marginHorizontal:4,flex:1/u}})})))),f.createElement(b,{style:S.section},Object.entries(q).map(function(n){let[e,{icon:c,patches:i}]=n;return f.createElement(We,{key:e,title:F.capitalize(e),icon:f.createElement(at.FormRow.Icon,{style:S.sectionIcon,source:R(c)}),inset:!0,sectionBodyStyle:{borderRadius:24},uppercaseTitle:!1,patches:i},Object.values(i).filter(function(a){let{title:u,subtitle:d}=a;return[u,d].some(function(s){return s.toLowerCase().includes(o.toLowerCase())})}).map(function(a,u,d){let{key:s,title:y,subtitle:m,icon:p,render:h}=a;return f.createElement(b,{style:g(`${s}.enabled`)?{}:{opacity:.5}},f.createElement(ct,{label:y,subLabel:m,icon:f.createElement(st,{source:typeof p=="string"?R(p):p}),value:g(`${s}.enabled`),onValueChange:function(v){r.set(`${s}.enabled`,JSON.parse(v)),C(G(300,"keyboard"))},start:u===0,end:u===d.length-1}),h&&f.createElement(b,{style:S.renderable},f.createElement(h,{disabled:!g(`${s}.enabled`)})))}))})),f.createElement(b,{style:S.space}))}const de=ke(N.name);let ut=function(){function r(){k(this,r)}return w(r,[{key:"start",value:function(){it(de)}},{key:"stop",value:function(){de.unpatchAll()}},{key:"settings",value:function(){return f.createElement(lt,null)}}]),r}();var ft=new ut;return ft})();
