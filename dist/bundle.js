(function(){function w(n,o){if(!(n instanceof o))throw new TypeError("Cannot call a class as a function")}function Y(n,o){for(var r=0;r<o.length;r++){var t=o[r];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function S(n,o,r){return o&&Y(n.prototype,o),r&&Y(n,r),n}var pe="FakeNitro",me="rosie.fakenitro",ye="http://rosies-macbook-air.local:5496/bundle.js",he="1.0.2",ge="Adds an authentic pseudo-nitro experience to the client, ranging from free emojis to image banners.",ve=[{name:"Rosie<3",id:"581573474296791211"}],N={name:pe,id:me,bundle:ye,version:he,description:ge,authors:ve};const{utilities:D,metro:E,components:be,assets:{getIDByName:R},storage:{useSettingsStore:K,get:_e,set:ft},patcher:{createPatcher:Ee}}=window.unbound,ke=window.ReactNative,u=window.React,[Q,we,F]=E.findByProps({params:["canUseEmojisEverywhere"],lazy:!0},{params:["uploadLocalFiles"],lazy:!0},{params:["sendMessage","receiveMessage"],lazy:!0},{bulk:!0}),{ScrollView:Se,TouchableOpacity:W,View:b,LayoutAnimation:{create:L,configureNext:C},FlatList:dt}=ke,g=function(n){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return _e(N.name,n,o)},$e=function(n,o,r){return Object.values(o).map(function(t){let{patches:e}=t;Object.values(e).forEach(function(c){let{key:i}=c;return n.set(`${i}.enabled`,r)})})};function f(n,o,r){return o in n?Object.defineProperty(n,o,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[o]=r,n}function G(n,o){return G=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},G(n,o)}function P(n,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(o&&o.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),o&&G(n,o)}function z(n){return z=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},z(n)}function Re(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Pe(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Oe(n){return n&&typeof Symbol<"u"&&n.constructor===Symbol?"symbol":typeof n}function je(n,o){return o&&(Oe(o)==="object"||typeof o=="function")?o:Pe(n)}function O(n){var o=Re();return function(){var t=z(n),e;if(o){var c=z(this).constructor;e=Reflect.construct(t,arguments,c)}else e=t.apply(this,arguments);return je(this,e)}}let _=function(){function n(){w(this,n)}return S(n,null,[{key:"patch",value:function(o){}},{key:"render",value:function(o){return u.createElement(u.Fragment,null)}}]),n}();f(_,"key",void 0),f(_,"title",void 0),f(_,"subtitle",void 0),f(_,"icon",void 0);const{findStore:Ie}=E,xe=Ie("SelectedGuild");let T=function(n){P(r,n);var o=O(r);function r(){return w(this,r),o.apply(this,arguments)}return S(r,null,[{key:"parseEmojis",value:function(t){!t||!g(`${this.key}.enabled`)||(t.validNonShortcutEmojis.forEach(function(e,c){var i,a;(e.guildId!==xe.getGuildId()||e.animated)&&(t.content=t.content.replace(`<${e.animated?"a":""}:${(i=e.originalName)!=null?i:e.name}:${e.id}>`,e.url.replace("webp","png").replace(/size=\d+/,`size=48&quality=lossless&name=${(a=e.originalName)!=null?a:e.name}`)),delete t.validNonShortcutEmojis[c])}),t.validNonShortcutEmojis=t.validNonShortcutEmojis.filter(function(e){return e}))}},{key:"patch",value:function(t){var e=this;const c=function(i){t.instead(Q,i,function(a,s,d){return g(`${e.key}.enabled`)?d.apply(a,s):!0})};c("canUseEmojisEverywhere"),c("canUseAnimatedEmojis"),t.before(F,"sendMessage",function(i,a){let[,s]=a;return e.parseEmojis(s)}),t.before(we,"uploadLocalFiles",function(i,a){let[{parsedMessage:s}]=a;return e.parseEmojis(s)})}}]),r}(_);f(T,"key","freeEmojis"),f(T,"title","Free Emojis"),f(T,"subtitle","Allows you to send any custom or animated emoji as an image/gif link."),f(T,"icon","ic_emoji_24px");const{findStore:Te,findByName:Be}=E,{getCustomEmojiById:Ue}=Te("Emoji"),X=Be("RowManager");let j=function(n){P(r,n);var o=O(r);function r(){return w(this,r),o.apply(this,arguments)}return S(r,null,[{key:"patch",value:function(t){var e=this;t.before(X.prototype,"generate",function(c,i){var a,s,d;let[l]=i;if(l.rowType!==1||!((a=l.message)!=null&&a.content)||!g(`${e.key}.enabled`))return;let y=l.message.content;const p=e.emojiLinkRegex;if(typeof y!="string"||!y.match(p))return;let m=y.slice((s=y.match(p))==null?void 0:s.index).trim().split(`
`);if(!m.every(function(v){return v.match(p)}))return;y=y.slice(0,(d=y.match(p))==null?void 0:d.index),y=y.replace(/  /g,function(){return` ${m.shift()} `}).trim(),m.length&&(y+=` ${m.join(" ")}`);const h=l.message.embeds.filter(function(v){return!(v.type==="image"&&v.url.match(p))});l.message.content=y,l.message.embeds=h,l.__fakenitro=!0}),t.after(X.prototype,"generate",function(c,i,a){var s;let[d]=i;if(d.rowType!==1||!d.__fakenitro||!Array.isArray(a.message.content)||!g(`${e.key}.enabled`))return;const{content:l}=a.message;if(!Array.isArray(l))return;const y=e.emojiLinkRegex,p=l.every(function(m){return!!(m.type==="link"&&m.target.match(y)||m.type==="text"&&m.content===" ")});for(let m=0;m<l.length;m++){const h=l[m];if(h.type!=="link")continue;const v=h.target.match(y);if(!v)continue;const A=`${v[0]}?size=128`,de=Ue(v[1]);l[m]={type:"customEmoji",id:v[1],alt:(s=de?.name)!=null?s:"<fakenitro>",src:A,frozenSrc:A.replace("gif","webp"),jumboable:p?!0:void 0}}})}}]),r}(_);f(j,"key","realEmojis"),f(j,"title","Real Emojis"),f(j,"subtitle","Formats fake nitro emoji links into real emojis by parsing the links when rendering the chat."),f(j,"icon","ic_double_down_arrow"),f(j,"emojiLinkRegex",/https:\/\/cdn.discordapp.com\/emojis\/(\d+)\.\w+/);const{findStore:Z}=E,Ae=Z("Stickers"),Ne=Z("Channel");let B=function(n){P(r,n);var o=O(r);function r(){return w(this,r),o.apply(this,arguments)}return S(r,null,[{key:"getStickerUrl",value:function(t){return`https://media.discordapp.net/stickers/${t}.png?size=160&quality=lossless`}},{key:"canUseSticker",value:function(t,e){return!t.guild_id||t.guild_id===Ne.getChannel(e).guild_id}},{key:"patch",value:function(t){var e=this;t.instead(Q,"canUseStickersEverywhere",function(c,i,a){return g(`${e.key}.enabled`)?a.apply(c,i):!0}),t.instead(F,"sendStickers",function(c,i,a){const[s,d,l,y]=i,p=d.map(function(h){return Ae.getStickerById(h)}).filter(function(h){return!e.canUseSticker(h,s)});if(p.length<1)return a.apply(c,i);const m=p.map(function(h){return e.getStickerUrl(h.id)}).join(`
`);F.sendMessage(s,{content:m},null,y)})}}]),r}(_);f(B,"key","freeStickers"),f(B,"title","Free Stickers"),f(B,"subtitle","Turns invalid stickers into images when sent. Note that animated stickers will not be animated."),f(B,"icon","img_nitro_sticker");const{findByName:Ce,findStore:ze,common:{Clipboard:Me},components:{Redesign:De}}=E,{findInReactTree:Fe}=D,Le=ze("UserProfile"),Ge=Ce("EditProfileTheme",{interop:!1}),He=function(n){let{getText:o}=n,r;const[t,e]=u.useState(!1);return u.createElement(De.IconButton,{icon:R("ic_message_copy"),variant:"primary",size:"md",loading:t,onPress:function(){clearTimeout(r),e(function(c){return!c}),r=setTimeout(function(){return e(function(c){return!c})},400),Me.setString(o())}})};let $=function(n){P(r,n);var o=O(r);function r(){return w(this,r),o.apply(this,arguments)}return S(r,null,[{key:"is3y3",value:function(t){return Boolean([...t].some(function(e){return 917504<e.codePointAt(0)&&e.codePointAt(0)<917631}))}},{key:"encode",value:function(t){return[...t].map(function(e){return 0<e.codePointAt(0)&&e.codePointAt(0)<127?`${String.fromCodePoint(e.codePointAt(0)+917504)}`:e}).join("")}},{key:"decode",value:function(t){return[...t].map(function(e){return 917504<e.codePointAt(0)&&e.codePointAt(0)<917631?String.fromCodePoint(e.codePointAt(0)-917504):e}).join("")}},{key:"patch",value:function(t){var e=this;t.after(Le,"getUserProfile",function(c,i,a){if(!a||!e.is3y3(a.bio)||!g(`${e.key}.enabled`))return;const s=e.decode(a.bio),d=s.match(e.colorExpression);!d||(d.shift(),a.themeColors=d.map(function(l){return parseInt("0x"+l.slice(1))}),a.premiumType=2,a.bio=s.replace(e.replacingExpression,""))}),t.after(Ge,"default",function(c,i,a){var s;if(!g(`${e.key}.enabled`))return;const d=Fe(a,function(p){return p?.children.find(function(m){var h;return((h=m?.type)==null?void 0:h.name)==="ColorSwatch"})}),l=function(p){var m;return(m=d?.children)==null?void 0:m.find(function(h){var v,A;return((v=h?.type)==null?void 0:v.name)==="ColorSwatch"&&((A=h?.props)==null?void 0:A.description)===p})},y=function(p){return p.props.color.toString(16).padStart(6,"0")};(s=d.children)==null||s.unshift(u.createElement(b,{style:{marginTop:5,marginRight:8}},u.createElement(He,{getText:function(){const p=l("Primary"),m=l("Accent");return e.encode(`[#${y(p)},#${y(m)}]`)}})))})}}]),r}(_);f($,"key","profileThemes"),f($,"title","Profile Themes"),f($,"subtitle",'Uses 3y3 text to colorize profiles. Copy your own from the "Profile Theme" section.'),f($,"icon","ic_custom_color"),f($,"colorExpression",/\[(\#[0-9a-fA-F]{6})\s*,\s*(\#[0-9a-fA-F]{6})\]/),f($,"replacingExpression",new RegExp($.colorExpression,"g"));var Je=Object.defineProperty,M=Object.getOwnPropertySymbols,ee=Object.prototype.hasOwnProperty,te=Object.prototype.propertyIsEnumerable,ne=(n,o,r)=>o in n?Je(n,o,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[o]=r,Ve=(n,o)=>{for(var r in o||(o={}))ee.call(o,r)&&ne(n,r,o[r]);if(M)for(var r of M(o))te.call(o,r)&&ne(n,r,o[r]);return n},qe=(n,o)=>{var r={};for(var t in n)ee.call(n,t)&&o.indexOf(t)<0&&(r[t]=n[t]);if(n!=null&&M)for(var t of M(n))o.indexOf(t)<0&&te.call(n,t)&&(r[t]=n[t]);return r},re;const{common:{StyleSheet:Ye,Theme:H},components:{Forms:J}}=E,k=function(n){return Ye.createThemedStyleSheet(n)}({navigation:{paddingHorizontal:16,paddingBottom:16,backgroundColor:H.unsafe_rawColors.PRIMARY_800},shadow:{shadowColor:"#000",shadowOffset:{width:1,height:4},shadowOpacity:.15,shadowRadius:4.65,elevation:8},section:{marginHorizontal:16,shadowColor:"#000",shadowOffset:{width:1,height:4},shadowOpacity:.15,shadowRadius:4.65,elevation:8,height:"100%"},sectionIcon:{width:16,height:16,marginHorizontal:4},renderable:{backgroundColor:(re=H.colors.CARD_PRIMARY_BG)!=null?re:H.colors.BACKGROUND_PRIMARY},space:{marginBottom:50}}),Ke=[{title:"Disable",value:!1},{title:"Enable",value:!0}],Qe=function(n){let o=n,{title:r,icon:t,patches:e,children:c,style:i}=o,a=qe(o,["title","icon","patches","children","style"]);const[s,d]=u.useState(g(`${r}.hidden`,!1)),l=Object.keys(e).every(function(p){return!g(`${p}.enabled`)}),y=K(N.name);return u.useEffect(function(){y.set(`${r}.hidden`,s)},[s]),u.createElement(J.FormSection,Ve({title:r,style:[i,{opacity:l?.5:1}],icon:u.createElement(b,{style:{flexDirection:"row"}},t,u.createElement(W,{onPress:function(){Object.keys(e).forEach(function(p){return y.set(`${p}.enabled`,l)}),C(L(300,"keyboard"))}},u.createElement(J.FormRow.Icon,{source:R(l?"Small":"Check"),style:k.sectionIcon})),u.createElement(W,{onPress:function(){d(function(p){return!p}),C({duration:300,create:{type:"keyboard",property:"opacity"},update:{type:"easeInEaseOut"},delete:{type:"easeInEaseOut",property:"opacity"}})}},u.createElement(J.FormRow.Icon,{source:R(`ic_arrow${s?"":"_down"}`),style:k.sectionIcon})))},a),!s&&c)},oe={serverInvite:"https://discord.gg/TeRQEPb",bannersSource:"https://raw.githubusercontent.com/Discord-Custom-Covers/usrbg/master/dist/usrbg.json"},{findByProps:ie,components:{Redesign:ae}}=E,We=ie("default","getUserBannerURL",{lazy:!0}),Xe=ie("openURL","openDeeplink",{lazy:!0});let I=function(n){P(r,n);var o=O(r);function r(){return w(this,r),o.apply(this,arguments)}return S(r,null,[{key:"fetchBanners",value:function(){var t=this;return new Promise(function(e,c){fetch(oe.bannersSource).then(function(i){return i.ok||c("Failed to fetch badges."),i.json()}).then(function(i){t.banners=i,e(1)}).catch(console.error)})}},{key:"getBanner",value:function(t){var e;const c=(e=this.banners)==null?void 0:e.find(function(i){return i.uid===t.id});return t?.banner===void 0&&c?c.img:t.banner}},{key:"patch",value:function(t){var e=this;t.after(We,"getUserBannerURL",function(c,i){let[a]=i;return g(`${e.key}.enabled`)?e.banners?e.getBanner(a):(e.fetchBanners(),a.banner):a.banner})}},{key:"render",value:function(t){let{disabled:e}=t;const[c,i]=u.useState(!1);return u.createElement(b,{style:{flexDirection:"row",marginHorizontal:16,marginBottom:16}},u.createElement(ae.Button,{text:"Join Server",onPress:function(){return Xe.openDeeplink(oe.serverInvite)},style:{flex:.5,marginRight:10},variant:"primary",size:"md",icon:R("icon-invite"),iconPosition:"start",disabled:e}),u.createElement(ae.Button,{text:"Reload Banners",onPress:function(){i(!0),r.fetchBanners().then(function(){return i(!1)}).catch(function(a){return console.error(a)})},style:{flex:.5},variant:"primary-alt",size:"md",icon:R("ic_message_retry"),iconPosition:"start",disabled:e,loading:c}))}}]),r}(_);f(I,"key","customBanner"),f(I,"title","Custom Banner"),f(I,"subtitle","Displays custom banners with the UsrBG API. Request your own at the server below."),f(I,"icon","ic_profile_24px"),f(I,"banners",void 0);const{findByName:ce,findByProps:se,common:{i18n:{Messages:U}}}=E,{findInReactTree:Ze}=D,et=se("ButtonColors",{lazy:!0}),tt=se("TextStyleSheet",{lazy:!0}),nt=ce("SettingsOverviewScreen",{interop:!1,lazy:!0}),rt=ce("UpsellCard",{interop:!1,lazy:!0});let x=function(n){P(r,n);var o=O(r);function r(){return w(this,r),o.apply(this,arguments)}return S(r,null,[{key:"patch",value:function(t){var e=this;t.instead(et,"default",function(c,i,a){if(!(i[0].text===U.EMOJI_POPOUT_PREMIUM_CTA&&g(`${e.key}.enabled`)))return a.apply(c,i)}),t.instead(b,"render",function(c,i,a){var s;if(!([U.PREMIUM,"Nitro"].includes((s=i[0])==null?void 0:s.accessibilityLabel)&&g(`${e.key}.enabled`)))return a.apply(c,i)}),t.instead(rt,"default",function(c,i,a){if(!g(`${e.key}.enabled`))return a.apply(c,i)}),t.before(tt.Text,"render",function(c,i){!g(`${e.key}.enabled`)||typeof i[0].children!="string"||e.props.forEach(function(a){var s,d,l;const y=U[`EMOJI_POPOUT_${a}`],p=U[`EMOJI_POPOUT_PREMIUM_${a}`];!((s=i[0].children)!=null&&s.includes(y))||(i[0].children=(l=(d=i[0].children)==null?void 0:d.replace)==null?void 0:l.call(d,y,p))})}),t.after(nt,"default",function(c,i,a){const{sections:s}=Ze(a,function(l){return l.sections}),d=s.find(function(l){return l.title===U.ACCOUNT_SETTINGS});d&&(d.settings=d.settings.filter(function(l){return l!=="PREMIUM"}))})}}]),r}(_);f(x,"key","hideUpsells"),f(x,"title","Hide Upsells"),f(x,"subtitle",'Hide any and all "Get Nitro" buttons and upsells throughout Discord'),f(x,"icon","img_nitro_boosted"),f(x,"props",["CURRENT_GUILD_DESCRIPTION","JOINED_GUILD_DESCRIPTION","UNJOINED_DISCOVERABLE_GUILD_DESCRIPTION"]);const V={chat:{icon:"img_nitro_star",patches:{freeEmojis:T,realEmojis:j,freeStickers:B}},profile:{icon:"ic_profile_24px",patches:{profileThemes:$,customBanner:I}},client:{icon:"ic_nitro_rep_24px",patches:{hideUpsells:x}}},ot=function(n){return Object.values(V).forEach(function(o){Object.values(o.patches).forEach(function(r){var t;try{r.patch(n)}catch(e){console.error(`Patch '${r.title}' (${r.key}) errored with '${(t=e.message)!=null?t:e}'.`)}})})},{components:{Forms:it,Redesign:{TableSwitchRow:at,TableRowIcon:ct},Button:q}}=E,{AdvancedSearch:le}=be,ue={type:"FAKE_NITRO"};function st(){const n=K(N.name),[o,r]=le.useAdvancedSearch(ue);return u.createElement(b,null,u.createElement(b,{style:k.navigation},u.createElement(b,{style:k.shadow},u.createElement(le,{searchContext:ue,controls:r})),u.createElement(b,{style:k.shadow},u.createElement(b,{style:{flexDirection:"row"}},Ke.map(function(t,e,c){let{title:i,value:a}=t,{length:s}=c;return u.createElement(q,{color:q.Colors.BRAND,text:i,size:q.Sizes.MEDIUM,onPress:function(){$e(n,V,a),C(L(300,"keyboard"))},style:{marginTop:16,borderRadius:12,marginHorizontal:4,flex:1/s}})})))),u.createElement(Se,{style:k.section},u.createElement(b,{style:{marginTop:-20}}),Object.entries(V).map(function(t){let[e,{icon:c,patches:i}]=t;return u.createElement(Qe,{key:e,title:D.capitalize(e),icon:u.createElement(it.FormRow.Icon,{style:k.sectionIcon,source:R(c)}),inset:!0,sectionBodyStyle:{borderRadius:24},uppercaseTitle:!1,patches:i},Object.values(i).filter(function(a){let{title:s,subtitle:d}=a;return[s,d].some(function(l){return l.toLowerCase().includes(o.toLowerCase())})}).map(function(a,s,d){let{key:l,title:y,subtitle:p,icon:m,render:h}=a;return u.createElement(u.Fragment,null,u.createElement(at,{label:y,subLabel:p,icon:u.createElement(ct,{source:typeof m=="string"?R(m):m}),value:g(`${l}.enabled`),onValueChange:function(v){n.set(`${l}.enabled`,JSON.parse(v)),C(L(300,"keyboard"))},disabled:!g(`${l}.enabled`),start:s===0,end:s===d.length-1}),h&&u.createElement(b,{style:k.renderable},u.createElement(h,{disabled:!g(`${l}.enabled`)})))}))})),u.createElement(b,{style:k.space}))}const fe=Ee(N.name);let lt=function(){function n(){w(this,n)}return S(n,[{key:"start",value:function(){ot(fe)}},{key:"stop",value:function(){fe.unpatchAll()}},{key:"settings",value:function(){return u.createElement(st,null)}}]),n}();var ut=new lt;return ut})();
