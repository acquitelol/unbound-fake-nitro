(function(){function k(r,o){if(!(r instanceof o))throw new TypeError("Cannot call a class as a function")}function Y(r,o){for(var e=0;e<o.length;e++){var t=o[e];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(r,t.key,t)}}function w(r,o,e){return o&&Y(r.prototype,o),e&&Y(r,e),r}var me="FakeNitro",he="rosie.fakenitro",ye="http://rosies-macbook-air.local:5496/bundle.js",ge="1.0.7",ve="ic_nitro_rep_24px",be="Adds an authentic pseudo-nitro experience to the client, ranging from free emojis to image banners.",_e=[{name:"Rosie<3",id:"588262373488590878"}],B={name:me,id:he,bundle:ye,version:ge,icon:ve,description:be,authors:_e};const{utilities:K,metro:E,components:Ee,assets:{getIDByName:R},storage:{useSettingsStore:Q,get:ke,set:we,on:mt},patcher:{createPatcher:Pe}}=window.unbound;E.stores.Users;const Se=window.ReactNative,u=window.React,[W,Re,L]=E.findByProps({params:["canUseEmojisEverywhere"],lazy:!0},{params:["uploadLocalFiles"],lazy:!0},{params:["sendMessage","receiveMessage"],lazy:!0},{bulk:!0}),{ScrollView:$e,TouchableOpacity:X,View:v,LayoutAnimation:{create:F,configureNext:N},FlatList:ht}=Se,j=function(r){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return ke(B.name,r,o)},Oe=function(r,o){return we(B.name,r,o)},je=function(r,o,e){return Object.values(o).map(function(t){let{patches:n}=t;Object.values(n).forEach(function(c){let{key:i}=c;return r.set(`${i}.enabled`,e)})})};function l(r,o,e){return o in r?Object.defineProperty(r,o,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[o]=e,r}function G(r,o){return G=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t},G(r,o)}function $(r,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(o&&o.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),o&&G(r,o)}function z(r){return z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},z(r)}function Ie(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function xe(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function Te(r){return r&&typeof Symbol<"u"&&r.constructor===Symbol?"symbol":typeof r}function Be(r,o){return o&&(Te(o)==="object"||typeof o=="function")?o:xe(r)}function O(r){var o=Ie();return function(){var t=z(r),n;if(o){var c=z(this).constructor;n=Reflect.construct(t,arguments,c)}else n=t.apply(this,arguments);return Be(this,n)}}let b=function(){function r(){k(this,r)}return w(r,null,[{key:"get",value:function(o,e){var t;return(t=j(`${this.key}.${o}`))!=null?t:e}},{key:"set",value:function(o,e){return Oe(`${this.key}.${o}`,e)}},{key:"enabled",get:function(){return this.get("enabled")}},{key:"patch",value:function(o){}},{key:"render",value:function(o){}}]),r}();l(b,"key",void 0),l(b,"title",void 0),l(b,"subtitle",void 0),l(b,"icon",void 0);const{findStore:Ue}=E,Ae=Ue("SelectedGuild");let U=function(r){$(e,r);var o=O(e);function e(){return k(this,e),o.apply(this,arguments)}return w(e,null,[{key:"parseEmojis",value:function(t){!t||!t.validNonShortcutEmojis||!this.enabled||(t.validNonShortcutEmojis.forEach(function(n,c){var i,a;(n.guildId!==Ae.getGuildId()||n.animated)&&(t.content=t.content.replace(`<${n.animated?"a":""}:${(i=n.originalName)!=null?i:n.name}:${n.id}>`,n.url.replace("webp","png").replace(/size=\d+/,`size=48&quality=lossless&name=${(a=n.originalName)!=null?a:n.name}`)),delete t.validNonShortcutEmojis[c])}),t.validNonShortcutEmojis=t.validNonShortcutEmojis.filter(function(n){return n}))}},{key:"patch",value:function(t){var n=this;t.before(L,"sendMessage",function(c,i){let[,a]=i;return n.parseEmojis(a)}),t.before(Re,"uploadLocalFiles",function(c,i){let[{parsedMessage:a}]=i;return n.parseEmojis(a)})}}]),e}(b);l(U,"key","freeEmojis"),l(U,"title","Free Emojis"),l(U,"subtitle","Allows you to send any custom or animated emoji as an image/gif link."),l(U,"icon","ic_emoji_24px");const{findStore:Ce,findByName:Ne}=E,{getCustomEmojiById:ze}=Ce("Emoji"),Z=Ne("RowManager");let I=function(r){$(e,r);var o=O(e);function e(){return k(this,e),o.apply(this,arguments)}return w(e,null,[{key:"patch",value:function(t){var n=this;t.before(Z.prototype,"generate",function(c,i){var a,s,d;let[f]=i;if(f.rowType!==1||!((a=f.message)!=null&&a.content)||!n.enabled)return;let h=f.message.content;const m=n.emojiLinkRegex;if(typeof h!="string"||!h.match(m))return;let p=h.slice((s=h.match(m))==null?void 0:s.index).trim().split(`
`);if(!p.every(function(g){return g.match(m)}))return;h=h.slice(0,(d=h.match(m))==null?void 0:d.index),h=h.replace(/  /g,function(){return` ${p.shift()} `}).trim(),p.length&&(h+=` ${p.join(" ")}`);const y=f.message.embeds.filter(function(g){return!(g.type==="image"&&g.url.match(m))});f.message.content=h,f.message.embeds=y,f.__fakenitro=!0}),t.after(Z.prototype,"generate",function(c,i,a){var s;let[d]=i;if(d.rowType!==1||!d.__fakenitro||!Array.isArray(a.message.content)||!n.enabled)return;const{content:f}=a.message;if(!Array.isArray(f))return;const h=n.emojiLinkRegex,m=f.every(function(p){return!!(p.type==="link"&&p.target.match(h)||p.type==="text"&&p.content===" ")});for(let p=0;p<f.length;p++){const y=f[p];if(y.type!=="link")continue;const g=y.target.match(h);if(!g)continue;const _=`${g[0]}?size=4096`,pe=ze(g[1]);f[p]={type:"customEmoji",id:g[1],alt:(s=pe?.name)!=null?s:"<invalid>",src:_,frozenSrc:_.replace("gif","webp"),jumboable:m?!0:void 0}}})}}]),e}(b);l(I,"key","realEmojis"),l(I,"title","Real Emojis"),l(I,"subtitle","Formats fake nitro emoji links into real emojis by parsing the links when rendering the chat."),l(I,"icon","ic_double_down_arrow"),l(I,"emojiLinkRegex",/https:\/\/cdn.discordapp.com\/emojis\/(\d+)\.\w+/);const{findStore:ee}=E,Me=ee("Stickers"),De=ee("Channel");let A=function(r){$(e,r);var o=O(e);function e(){return k(this,e),o.apply(this,arguments)}return w(e,null,[{key:"getStickerUrl",value:function(t){return`https://media.discordapp.net/stickers/${t}.png?size=160&quality=lossless`}},{key:"canUseSticker",value:function(t,n){return!t.guild_id||t.guild_id===De.getChannel(n).guild_id}},{key:"patch",value:function(t){var n=this;t.instead(L,"sendStickers",function(c,i,a){var s;if(!n.enabled)return a.apply(c,i);const[d,f,h,m]=i,p=f.map(function(_){return Me.getStickerById(_)}),y=(s=p?.filter)==null?void 0:s.call(p,function(_){return!n.canUseSticker(_,d)});if(y.length<1)return a.apply(c,i);const g=y.map(function(_){return n.getStickerUrl(_.id)}).join(`
`);L.sendMessage(d,{content:g},null,m)})}}]),e}(b);l(A,"key","freeStickers"),l(A,"title","Free Stickers"),l(A,"subtitle","Turns invalid stickers into images when sent. Note that animated stickers won't animate :c"),l(A,"icon","StickerIcon");const{findByName:Le,findStore:Fe,common:{Clipboard:Ge},components:{Redesign:He}}=E,{findInReactTree:Je}=K,Ve=Fe("UserProfile"),qe=Le("EditProfileTheme",{interop:!1}),Ye=function(r){let{getText:o}=r,e;const[t,n]=u.useState(!1);return u.createElement(He.IconButton,{icon:R("ic_message_copy"),variant:"primary",size:"md",loading:t,onPress:function(){clearTimeout(e),n(function(c){return!c}),e=setTimeout(function(){return n(function(c){return!c})},400),Ge.setString(o())}})};let S=function(r){$(e,r);var o=O(e);function e(){return k(this,e),o.apply(this,arguments)}return w(e,null,[{key:"is3y3",value:function(t){return Boolean([...t].some(function(n){return 917504<n.codePointAt(0)&&n.codePointAt(0)<917631}))}},{key:"encode",value:function(t){return[...t].map(function(n){return 0<n.codePointAt(0)&&n.codePointAt(0)<127?`${String.fromCodePoint(n.codePointAt(0)+917504)}`:n}).join("")}},{key:"decode",value:function(t){return[...t].map(function(n){return 917504<n.codePointAt(0)&&n.codePointAt(0)<917631?String.fromCodePoint(n.codePointAt(0)-917504):n}).join("")}},{key:"patch",value:function(t){var n=this;t.after(Ve,"getUserProfile",function(c,i,a){if(!a||!n.is3y3(a.bio)||!n.enabled)return;const s=n.decode(a.bio),d=s.match(n.colorExpression);!d||(d.shift(),a.themeColors=d.map(function(f){return parseInt("0x"+f.slice(1))}),a.premiumType=2,a.bio=s.replace(n.replacingExpression,""))}),t.after(qe,"default",function(c,i,a){var s;if(!n.enabled)return;const d=Je(a,function(m){return m?.children.find(function(p){var y;return((y=p?.type)==null?void 0:y.name)==="ColorSwatch"})}),f=function(m){var p;return(p=d?.children)==null?void 0:p.find(function(y){var g,_;return((g=y?.type)==null?void 0:g.name)==="ColorSwatch"&&((_=y?.props)==null?void 0:_.description)===m})},h=function(m){return m.props.color.toString(16).padStart(6,"0")};(s=d.children)==null||s.unshift(u.createElement(v,{style:{marginTop:5,marginRight:8}},u.createElement(Ye,{getText:function(){const m=f("Primary"),p=f("Accent");return n.encode(`[#${h(m)},#${h(p)}]`)}})))})}}]),e}(b);l(S,"key","profileThemes"),l(S,"title","Profile Themes"),l(S,"subtitle","Uses 3y3 text to colorize profiles. Copy your own from the 'Profile Theme' section."),l(S,"icon","ic_custom_color"),l(S,"colorExpression",/\[(\#[0-9a-fA-F]{6})\s*,\s*(\#[0-9a-fA-F]{6})\]/),l(S,"replacingExpression",new RegExp(S.colorExpression,"g"));var Ke=Object.defineProperty,M=Object.getOwnPropertySymbols,te=Object.prototype.hasOwnProperty,ne=Object.prototype.propertyIsEnumerable,re=(r,o,e)=>o in r?Ke(r,o,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[o]=e,Qe=(r,o)=>{for(var e in o||(o={}))te.call(o,e)&&re(r,e,o[e]);if(M)for(var e of M(o))ne.call(o,e)&&re(r,e,o[e]);return r},We=(r,o)=>{var e={};for(var t in r)te.call(r,t)&&o.indexOf(t)<0&&(e[t]=r[t]);if(r!=null&&M)for(var t of M(r))o.indexOf(t)<0&&ne.call(r,t)&&(e[t]=r[t]);return e},oe;const{common:{StyleSheet:Xe,Theme:H},components:{Forms:J}}=E,P=function(r){return Xe.createThemedStyleSheet(r)}({navigation:{paddingHorizontal:16,paddingBottom:16,backgroundColor:H.unsafe_rawColors.PRIMARY_800},shadow:{shadowColor:"#000",shadowOffset:{width:1,height:4},shadowOpacity:.15,shadowRadius:4.65,elevation:8},section:{marginTop:-20,marginHorizontal:16,shadowColor:"#000",shadowOffset:{width:1,height:4},shadowOpacity:.15,shadowRadius:4.65,elevation:8,height:"100%"},sectionIcon:{width:16,height:16,marginHorizontal:4},renderable:{backgroundColor:(oe=H.colors.CARD_PRIMARY_BG)!=null?oe:H.colors.BACKGROUND_PRIMARY},space:{marginBottom:50}}),Ze=[{title:"Disable",value:!1},{title:"Enable",value:!0}],et=function(r){let o=r,{title:e,icon:t,patches:n,children:c,style:i}=o,a=We(o,["title","icon","patches","children","style"]);const[s,d]=u.useState(j(`${e}.hidden`,!1)),f=Object.keys(n).every(function(m){return!j(`${m}.enabled`)}),h=Q(B.name);return u.useEffect(function(){h.set(`${e}.hidden`,s)},[s]),u.createElement(J.FormSection,Qe({title:e,style:[i,{opacity:f?.5:1}],icon:u.createElement(v,{style:{flexDirection:"row"}},t,u.createElement(X,{onPress:function(){Object.keys(n).forEach(function(m){return h.set(`${m}.enabled`,f)}),N(F(300,"keyboard"))}},u.createElement(J.FormRow.Icon,{source:R(f?"Small":"Check"),style:P.sectionIcon})),u.createElement(X,{onPress:function(){d(function(m){return!m}),N({duration:300,create:{type:"keyboard",property:"opacity"},update:{type:"easeInEaseOut"},delete:{type:"easeInEaseOut",property:"opacity"}})}},u.createElement(J.FormRow.Icon,{source:R(`ic_arrow${s?"":"_down"}`),style:P.sectionIcon})))},a),!s&&c)},ie={serverInvite:"https://discord.gg/TeRQEPb",bannersSource:"https://raw.githubusercontent.com/Discord-Custom-Covers/usrbg/master/dist/usrbg.json"},{findByProps:ae,components:{Redesign:ce}}=E,tt=ae("default","getUserBannerURL",{lazy:!0}),nt=ae("openURL","openDeeplink",{lazy:!0});let x=function(r){$(e,r);var o=O(e);function e(){return k(this,e),o.apply(this,arguments)}return w(e,null,[{key:"fetchBanners",value:function(){var t=this;return new Promise(function(n,c){fetch(ie.bannersSource).then(function(i){return i.ok||c("Failed to fetch badges."),i.json()}).then(function(i){t.banners=i,n(1)}).catch(console.error)})}},{key:"getBanner",value:function(t){var n;const c=(n=this.banners)==null?void 0:n.find(function(i){return i.uid===t.id});return!(t!=null&&t.banner)&&c?c.img:t.banner}},{key:"patch",value:function(t){var n=this;t.after(tt,"getUserBannerURL",function(c,i){let[a]=i;return n.enabled?n.banners?n.getBanner(a):(n.fetchBanners(),a.banner):a.banner})}},{key:"render",value:function(t){let{disabled:n}=t;const[c,i]=u.useState(!1);return u.createElement(v,{style:{flexDirection:"row",marginHorizontal:16,marginBottom:16}},u.createElement(ce.Button,{text:"Join Server",onPress:function(){return nt.openDeeplink(ie.serverInvite)},style:{flex:.5,marginRight:10},variant:"primary",size:"md",icon:R("icon-invite"),iconPosition:"start",disabled:n}),u.createElement(ce.Button,{text:"Reload Banners",onPress:function(){i(!0),e.fetchBanners().then(function(){return i(!1)}).catch(function(a){return console.error(a)})},style:{flex:.5},variant:"primary-alt",size:"md",icon:R("ic_message_retry"),iconPosition:"start",disabled:n,loading:c}))}}]),e}(b);l(x,"key","customBanner"),l(x,"title","Custom Banner"),l(x,"subtitle","Displays custom banners with the UserBG API. Request your own at the server below."),l(x,"icon","ic_profile_24px"),l(x,"banners",void 0);const{findByName:se,findByProps:le,common:{i18n:{Messages:D}}}=E,rt=le("ButtonColors",{lazy:!0}),ot=le("TextStyleSheet",{lazy:!0}),it=se("SearchableSettingsList",{lazy:!0}),at=se("UpsellCard",{interop:!1,lazy:!0});let T=function(r){$(e,r);var o=O(e);function e(){return k(this,e),o.apply(this,arguments)}return w(e,null,[{key:"patch",value:function(t){var n=this;t.instead(rt,"default",function(c,i,a){if(!(i[0].text===D.EMOJI_POPOUT_PREMIUM_CTA&&n.enabled))return a.apply(c,i)}),t.instead(v,"render",function(c,i,a){var s;if(!([D.PREMIUM,"Nitro"].includes((s=i[0])==null?void 0:s.accessibilityLabel)&&n.enabled))return a.apply(c,i)}),t.instead(at,"default",function(c,i,a){if(!n.enabled)return a.apply(c,i)}),t.before(ot.Text,"render",function(c,i){!n.enabled||typeof i[0].children!="string"||n.props.forEach(function(a){var s,d,f;const h=D[`EMOJI_POPOUT_${a}`],m=D[`EMOJI_POPOUT_PREMIUM_${a}`];!((s=i[0].children)!=null&&s.includes(h))||(i[0].children=(f=(d=i[0].children)==null?void 0:d.replace)==null?void 0:f.call(d,h,m))})}),t.before(it.SearchableSettingsList,"type",function(c,i){let[{sections:a}]=i;const s=a.find(function(d){return d.settings.includes("PREMIUM")});s&&(s.settings=s.settings.filter(function(d){return d!=="PREMIUM"}))})}}]),e}(b);l(T,"key","hideUpsells"),l(T,"title","Hide Upsells"),l(T,"subtitle","Hide all 'Get Nitro' upsells throughout Discord (doesn't include boosting upsells)"),l(T,"icon","img_nitro_boosted"),l(T,"props",["CURRENT_GUILD_DESCRIPTION","JOINED_GUILD_DESCRIPTION","UNJOINED_DISCOVERABLE_GUILD_DESCRIPTION"]);let C=function(r){$(e,r);var o=O(e);function e(){return k(this,e),o.apply(this,arguments)}return w(e,null,[{key:"patch",value:function(t){var n=this;Object.keys(W).forEach(function(c){c.includes("can")&&t.instead(W,c,function(i,a,s){return n.enabled?!0:s.apply(i,a)})})}}]),e}(b);l(C,"key","pseudoPatches"),l(C,"title","Pseudo Patches"),l(C,"subtitle","Patches several 'can' functions. Must be on to use most of the features in this plugin."),l(C,"icon","ic_message_retry");const V={client:{icon:"ic_nitro_rep_24px",patches:{hideUpsells:T,pseudoPatches:C}},chat:{icon:"img_nitro_star",patches:{freeEmojis:U,realEmojis:I,freeStickers:A}},profile:{icon:"ic_profile_24px",patches:{profileThemes:S,customBanner:x}}},ct=function(r){return Object.values(V).forEach(function(o){Object.values(o.patches).forEach(function(e){var t;try{e.patch(r)}catch(n){console.error(`Patch '${e.title}' (${e.key}) errored with '${(t=n.message)!=null?t:n}'.`)}})})},{components:{Forms:st,Redesign:{TableSwitchRow:lt,TableRowIcon:ut},Button:q}}=E,{AdvancedSearch:ue}=Ee,fe={type:"FAKE_NITRO"};function ft(){const r=Q(B.name),[o,e]=ue.useAdvancedSearch(fe);return u.createElement($e,null,u.createElement(v,{style:P.navigation},u.createElement(v,{style:P.shadow},u.createElement(ue,{searchContext:fe,controls:e})),u.createElement(v,{style:P.shadow},u.createElement(v,{style:{flexDirection:"row"}},Ze.map(function(t,n,c){let{title:i,value:a}=t,{length:s}=c;return u.createElement(q,{color:q.Colors.BRAND,text:i,size:q.Sizes.MEDIUM,onPress:function(){je(r,V,a),N(F(300,"keyboard"))},style:{marginTop:16,borderRadius:12,marginHorizontal:4,flex:1/s}})})))),u.createElement(v,{style:P.section},Object.entries(V).map(function(t){let[n,{icon:c,patches:i}]=t;return u.createElement(et,{key:n,title:K.capitalize(n),icon:u.createElement(st.FormRow.Icon,{style:P.sectionIcon,source:R(c)}),inset:!0,sectionBodyStyle:{borderRadius:24},uppercaseTitle:!1,patches:i},Object.values(i).filter(function(a){let{title:s,subtitle:d}=a;return[s,d].some(function(f){return f.toLowerCase().includes(o.toLowerCase())})}).map(function(a,s,d){let{key:f,title:h,subtitle:m,icon:p,render:y}=a;return u.createElement(u.Fragment,null,u.createElement(v,{style:j(`${f}.enabled`)?{}:{opacity:.5}},u.createElement(lt,{label:h,subLabel:m,icon:u.createElement(ut,{source:typeof p=="string"?R(p):p}),value:j(`${f}.enabled`),onValueChange:function(g){r.set(`${f}.enabled`,JSON.parse(g)),N(F(300,"keyboard"))},start:s===0,end:s===d.length-1})),y&&u.createElement(v,{style:P.renderable},u.createElement(y,{disabled:!j(`${f}.enabled`)})))}))})),u.createElement(v,{style:P.space}))}const de=Pe(B.name);let dt=function(){function r(){k(this,r)}return w(r,[{key:"start",value:function(){ct(de)}},{key:"stop",value:function(){de.unpatchAll()}},{key:"settings",value:function(){return u.createElement(ft,null)}}]),r}();var pt=new dt;return pt})();
